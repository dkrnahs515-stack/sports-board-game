<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Ïä§Ìè¨Ï∏† ÏßÅÍ¥Ä ÎßàÏä§ÌÑ∞ - Î©ÄÌã∞ÌîåÎ†àÏù¥Ïñ¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #333;
        }

        .game-container {
            max-width: 1200px;
            width: 100%;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        /* ÌîåÎ†àÏù¥Ïñ¥ ÏÑ§Ï†ï ÌôîÎ©¥ */
        .setup-screen {
            text-align: center;
            padding: 40px;
        }

        .setup-screen h2 {
            color: #667eea;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .player-setup {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .player-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 3px solid #dee2e6;
            transition: all 0.3s;
        }

        .player-card.active {
            border-color: #667eea;
            background: #e7f3ff;
        }

        .player-card h3 {
            margin-bottom: 15px;
            color: #495057;
        }

        .player-card input {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            margin-bottom: 10px;
        }

        .player-card input:focus {
            outline: none;
            border-color: #667eea;
        }

        .color-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }

        .color-option:hover {
            transform: scale(1.2);
        }

        .color-option.selected {
            border-color: #333;
            box-shadow: 0 0 0 3px white, 0 0 0 5px #333;
        }

        .emoji-selector {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .emoji-option {
            font-size: 2em;
            cursor: pointer;
            padding: 5px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .emoji-option:hover {
            background: #dee2e6;
            transform: scale(1.2);
        }

        .emoji-option.selected {
            background: #667eea;
        }

        /* Í≤åÏûÑ ÌôîÎ©¥ */
        .game-screen {
            display: none;
        }

        .game-screen.active {
            display: block;
        }

        .game-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        /* ÌîåÎ†àÏù¥Ïñ¥ Ï†ïÎ≥¥ ÏÇ¨Ïù¥ÎìúÎ∞î */
        .players-sidebar {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .player-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            border: 3px solid #dee2e6;
            transition: all 0.3s;
        }

        .player-info.current-turn {
            border-color: #28a745;
            background: #d4edda;
            box-shadow: 0 0 20px rgba(40, 167, 69, 0.3);
            animation: turnPulse 1.5s infinite;
        }

        @keyframes turnPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        .player-info.finished {
            opacity: 0.6;
            border-color: #ffc107;
            background: #fff3cd;
        }

        .player-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .player-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            border: 2px solid white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .player-name {
            font-weight: bold;
            font-size: 1.1em;
            flex: 1;
        }

        .player-stats {
            font-size: 0.9em;
            color: #666;
            line-height: 1.6;
        }

        .turn-indicator {
            background: #28a745;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            font-weight: bold;
            display: inline-block;
            margin-top: 5px;
        }

        .rank-badge {
            background: #ffc107;
            color: #333;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 0.8em;
            font-weight: bold;
            display: inline-block;
        }

        /* Î≥¥ÎìúÌåê ÏòÅÏó≠ */
        .board-area {
            display: flex;
            flex-direction: column;
        }

        .current-player-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 20px;
            background: #e9ecef;
            padding: 15px;
            border-radius: 15px;
        }

        .cell {
            aspect-ratio: 1;
            background: white;
            border: 3px solid #dee2e6;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 8px;
            cursor: help;
            transition: all 0.3s;
            position: relative;
            font-size: 0.85em;
        }

        .cell:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .cell-number {
            position: absolute;
            top: 5px;
            left: 5px;
            background: #495057;
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75em;
            font-weight: bold;
        }

        .cell-icon {
            font-size: 2em;
            margin-bottom: 3px;
        }

        .cell-name {
            font-size: 0.7em;
            text-align: center;
            font-weight: bold;
            color: #495057;
            line-height: 1.2;
        }

        /* Ïπ∏ ÌÉÄÏûÖÎ≥Ñ ÏÉâÏÉÅ */
        .cell.start {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            border-color: #4ecca3;
        }

        .cell.finish {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            border-color: #f39c12;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .cell.bonus {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-color: #3498db;
        }

        .cell.trap {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-color: #e74c3c;
        }

        .cell.quiz {
            background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%);
            border-color: #9b59b6;
        }

        .cell.event {
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            border-color: #e056fd;
        }

        .players-on-cell {
            position: absolute;
            bottom: 5px;
            right: 5px;
            display: flex;
            gap: 2px;
            flex-wrap: wrap;
            max-width: 70%;
            justify-content: flex-end;
        }

        .player-token {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            animation: tokenBounce 0.5s;
        }

        @keyframes tokenBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .dice-container {
            text-align: center;
        }

        .dice {
            width: 80px;
            height: 80px;
            background: white;
            border: 4px solid #667eea;
            border-radius: 15px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }

        .dice.rolling {
            animation: diceRoll 0.5s;
        }

        @keyframes diceRoll {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .message {
            text-align: center;
            padding: 20px;
            background: #e3f2fd;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            color: #1976d2;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            border: 2px solid #90caf9;
        }

        /* Î™®Îã¨ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: modalSlideIn 0.3s;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content h2 {
            margin-bottom: 20px;
            color: #667eea;
            font-size: 2em;
        }

        .modal-content p {
            margin-bottom: 20px;
            font-size: 1.2em;
            line-height: 1.6;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }

        .quiz-option {
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
        }

        .quiz-option:hover {
            background: #e9ecef;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .podium {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 20px;
            margin: 30px 0;
        }

        .podium-place {
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            min-width: 120px;
        }

        .podium-place.first {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            order: 2;
            transform: scale(1.1);
        }

        .podium-place.second {
            background: linear-gradient(135deg, #c2e9fb 0%, #a1c4fd 100%);
            order: 1;
        }

        .podium-place.third {
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            order: 3;
        }

        .podium-place.fourth {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            order: 4;
        }

        .podium-avatar {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .podium-rank {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .podium-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .podium-stats {
            font-size: 0.9em;
            color: #666;
        }

        /* Î∞òÏùëÌòï */
        @media (max-width: 1024px) {
            .game-layout {
                grid-template-columns: 1fr;
            }

            .players-sidebar {
                flex-direction: row;
                overflow-x: auto;
            }

            .player-info {
                min-width: 200px;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .board {
                gap: 5px;
                padding: 10px;
            }

            .cell {
                padding: 5px;
            }

            .cell-icon {
                font-size: 1.5em;
            }

            .cell-name {
                font-size: 0.6em;
            }

            .player-token {
                width: 24px;
                height: 24px;
                font-size: 0.9em;
            }

            .player-setup {
                grid-template-columns: 1fr;
            }

            .podium {
                flex-direction: column;
                align-items: center;
            }

            .podium-place {
                width: 100%;
                max-width: 300px;
            }

            .podium-place.first,
            .podium-place.second,
            .podium-place.third,
            .podium-place.fourth {
                order: initial !important;
                transform: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üéÆ Ïä§Ìè¨Ï∏† ÏßÅÍ¥Ä ÎßàÏä§ÌÑ∞</h1>
        <p class="subtitle">Î©ÄÌã∞ÌîåÎ†àÏù¥Ïñ¥ Î≥¥ÎìúÍ≤åÏûÑ (ÏµúÎåÄ 4Î™Ö)</p>

        <!-- ÌîåÎ†àÏù¥Ïñ¥ ÏÑ§Ï†ï ÌôîÎ©¥ -->
        <div class="setup-screen" id="setup-screen">
            <h2>üë• ÌîåÎ†àÏù¥Ïñ¥ ÏÑ§Ï†ï</h2>
            <div class="player-setup" id="player-setup">
                <!-- ÌîåÎ†àÏù¥Ïñ¥ Ïπ¥ÎìúÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÏÉùÏÑ±Îê©ÎãàÎã§ -->
            </div>
            <button class="btn btn-success" onclick="startGame()" style="font-size: 1.3em; padding: 20px 50px;">
                üéÆ Í≤åÏûÑ ÏãúÏûë!
            </button>
        </div>

        <!-- Í≤åÏûÑ ÌôîÎ©¥ -->
        <div class="game-screen" id="game-screen">
            <div class="game-layout">
                <!-- ÌîåÎ†àÏù¥Ïñ¥ Ï†ïÎ≥¥ ÏÇ¨Ïù¥ÎìúÎ∞î -->
                <div class="players-sidebar" id="players-sidebar">
                    <!-- ÌîåÎ†àÏù¥Ïñ¥ Ï†ïÎ≥¥Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                </div>

                <!-- Î≥¥ÎìúÌåê ÏòÅÏó≠ -->
                <div class="board-area">
                    <div class="current-player-banner" id="current-player-banner">
                        ÌîåÎ†àÏù¥Ïñ¥ 1Ïùò Ï∞®Î°ÄÏûÖÎãàÎã§!
                    </div>

                    <div class="message" id="message">
                        üè† Í≤åÏûÑÏùÑ ÏãúÏûëÌï©ÎãàÎã§! Ï£ºÏÇ¨ÏúÑÎ•º Íµ¥Î†§Ï£ºÏÑ∏Ïöî!
                    </div>

                    <div class="board" id="board">
                        <!-- Î≥¥ÎìúÌåêÏù¥ Ïó¨Í∏∞Ïóê ÏÉùÏÑ±Îê©ÎãàÎã§ -->
                    </div>

                    <div class="controls">
                        <div class="dice-container">
                            <div class="dice" id="dice">üé≤</div>
                        </div>
                        <button class="btn btn-primary" id="roll-btn" onclick="rollDice()">
                            üé≤ Ï£ºÏÇ¨ÏúÑ Íµ¥Î¶¨Í∏∞
                        </button>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="resetGame()">
                    üîÑ ÏÉà Í≤åÏûÑ ÏãúÏûë
                </button>
            </div>
        </div>
    </div>

    <!-- Î™®Îã¨ -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h2 id="modal-title">Ï†úÎ™©</h2>
            <p id="modal-text">ÎÇ¥Ïö©</p>
            <div id="modal-buttons" class="btn-group">
                <!-- Î≤ÑÌäºÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÏÉùÏÑ±Îê©ÎãàÎã§ -->
            </div>
        </div>
    </div>

    <script>
        // Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞
        const cells = [
            { num: 1, icon: 'üè†', name: 'Ï∂úÎ∞ú', type: 'start', effect: 'start' },
            { num: 2, icon: 'üì±', name: 'Ìã∞ÏºìÏòàÎß§', type: 'bonus', effect: 'move', value: 2 },
            { num: 3, icon: 'üí≥', name: 'ÍµêÌÜµÏπ¥ÎìúÏ∂©Ï†ÑÍπúÎπ°', type: 'trap', effect: 'skip', value: 1 },
            { num: 4, icon: 'üéØ', name: 'ÌåÄÌÄ¥Ï¶à', type: 'quiz', effect: 'quiz', category: 'team' },
            { num: 5, icon: 'üöá', name: 'ÏßÄÌïòÏ≤†ÌÉëÏäπ', type: 'normal', effect: 'none' },
            { num: 6, icon: 'üèüÔ∏è', name: 'Í≤ΩÍ∏∞Ïû•ÎèÑÏ∞©', type: 'bonus', effect: 'move', value: 1 },
            { num: 7, icon: 'üéµ', name: 'ÏùëÏõêÍ∞ÄÏïîÍ∏∞', type: 'bonus', effect: 'double', value: 1 },
            { num: 8, icon: 'üöª', name: 'ÌôîÏû•Ïã§ÎåÄÍ∏∞Ï§Ñ', type: 'trap', effect: 'skip', value: 1 },
            { num: 9, icon: 'üì∏', name: 'Ìè¨ÌÜ†Ï°¥', type: 'normal', effect: 'none' },
            { num: 10, icon: 'üçï', name: 'Í∞ÑÏãùÍµ¨Îß§', type: 'normal', effect: 'none' },
            { num: 11, icon: 'üí∫', name: 'Ï¢ãÏùÄÏûêÎ¶¨ÏÑ†Ï†ê', type: 'bonus', effect: 'move', value: 3 },
            { num: 12, icon: '‚öΩ', name: 'Ï¢ÖÎ™©ÌÄ¥Ï¶à', type: 'quiz', effect: 'quiz', category: 'sport' },
            { num: 13, icon: 'üéâ', name: 'Í≤ΩÍ∏∞ÏãúÏûë', type: 'event', effect: 'move', value: 1 },
            { num: 14, icon: 'üò±', name: 'Í∞ÑÏãùÏèüÏùå', type: 'trap', effect: 'move', value: -2 },
            { num: 15, icon: 'üé§', name: 'ÏùëÏõêÎß§ÎÑàÌÄ¥Ï¶à', type: 'quiz', effect: 'quiz', category: 'manner' },
            { num: 16, icon: 'üì¢', name: 'ÏùëÏõêÍ∞ÄÌï©Ï∞Ω', type: 'bonus', effect: 'move', value: 1 },
            { num: 17, icon: '‚ö°', name: 'Ïö∞Î¶¨ÌåÄÎìùÏ†ê!', type: 'bonus', effect: 'move', value: 5 },
            { num: 18, icon: 'üì±', name: 'Î∞∞ÌÑ∞Î¶¨Î∂ÄÏ°±', type: 'trap', effect: 'skip', value: 1 },
            { num: 19, icon: 'üéÅ', name: 'Í≤ΩÍ∏∞Ïû•Ïù¥Î≤§Ìä∏', type: 'event', effect: 'random' },
            { num: 20, icon: 'üéµ', name: 'ÌïòÌîÑÌÉÄÏûÑÏáº', type: 'normal', effect: 'none' },
            { num: 21, icon: 'üçó', name: 'ÏπòÌÇ®Î®πÎ∞©', type: 'bonus', effect: 'move', value: 1 },
            { num: 22, icon: 'üò¢', name: 'Ïö∞Î¶¨ÌåÄÏã§Ï†ê', type: 'trap', effect: 'move', value: -1 },
            { num: 23, icon: 'üèÜ', name: 'Í∑πÏ†ÅÏù∏Ïó≠Ï†ÑÏäπ', type: 'bonus', effect: 'move', value: 4 },
            { num: 24, icon: 'üëè', name: 'ÏÑ†ÏàòÏÇ¨Ïù∏Ìöå', type: 'event', effect: 'move', value: 2 },
            { num: 25, icon: 'üéä', name: 'Í≥®Ïù∏!', type: 'finish', effect: 'finish' }
        ];

        // ÌÄ¥Ï¶à Îç∞Ïù¥ÌÑ∞
        const quizzes = {
            team: [
                { q: 'FCÏÑúÏö∏Ïùò ÎßàÏä§ÏΩîÌä∏ Ïù¥Î¶ÑÏùÄ?', options: ['ÏÑúÏö∏Ïù¥', 'Í∞ïÏõêÏù¥', 'Î∂ÄÏ≤úÏù¥', 'Ïù∏Ï≤úÏù¥'], answer: 0 },
                { q: 'ÎëêÏÇ∞Î≤†Ïñ¥Ïä§Ïùò ÏÉÅÏßï ÎèôÎ¨ºÏùÄ?', options: ['Ìò∏ÎûëÏù¥', 'Í≥∞', 'ÏÇ¨Ïûê', 'ÎèÖÏàòÎ¶¨'], answer: 1 },
                { q: 'KÎ¶¨Í∑∏Îäî Î™á Í∞ú Î¶¨Í∑∏Î°ú ÎÇòÎâòÏñ¥Ï†∏ ÏûàÎÇò?', options: ['1Í∞ú', '2Í∞ú', '3Í∞ú', '4Í∞ú'], answer: 1 },
                { q: 'KBOÎäî Î™á Í∞ú ÌåÄÏù¥ Ï∞∏Í∞ÄÌïòÎÇò?', options: ['8Í∞ú', '9Í∞ú', '10Í∞ú', '12Í∞ú'], answer: 2 }
            ],
            sport: [
                { q: 'Ï∂ïÍµ¨ Í≤ΩÍ∏∞Îäî Ï†ÑÌõÑÎ∞ò Î™á Î∂ÑÏî©Ïù∏Í∞Ä?', options: ['40Î∂Ñ', '45Î∂Ñ', '50Î∂Ñ', '60Î∂Ñ'], answer: 1 },
                { q: 'ÏïºÍµ¨ÏóêÏÑú Ïä§Ìä∏ÎùºÏù¥ÌÅ¨ Î™á Í∞úÎ©¥ ÏïÑÏõÉÏù∏Í∞Ä?', options: ['2Í∞ú', '3Í∞ú', '4Í∞ú', '5Í∞ú'], answer: 1 },
                { q: 'Ï∂ïÍµ¨ÏóêÏÑú ÏÜêÏúºÎ°ú Í≥µÏùÑ Ïû°ÏùÑ Ïàò ÏûàÎäî ÏÑ†ÏàòÎäî?', options: ['Í≥µÍ≤©Ïàò', 'ÎØ∏ÎìúÌïÑÎçî', 'ÏàòÎπÑÏàò', 'Í≥®ÌÇ§Ìçº'], answer: 3 },
                { q: 'ÏïºÍµ¨Îäî Î™á Ïù¥ÎãùÍπåÏßÄ ÏßÑÌñâÌïòÎÇò?', options: ['7Ïù¥Îãù', '8Ïù¥Îãù', '9Ïù¥Îãù', '10Ïù¥Îãù'], answer: 2 }
            ],
            manner: [
                { q: 'ÏÉÅÎåÄÌåÄÏóêÍ≤å Ìï¥Ïïº Ìï† Ïò¨Î∞îÎ•∏ ÌñâÎèôÏùÄ?', options: ['ÏïºÏú†ÌïòÍ∏∞', 'Ï¢ãÏùÄ ÌîåÎ†àÏù¥Ïóê Î∞ïÏàò', 'ÏöïÌïòÍ∏∞', 'Î¨¥ÏãúÌïòÍ∏∞'], answer: 1 },
                { q: 'Í≤ΩÍ∏∞ Ï§ë ÌïòÎ©¥ Ïïà ÎêòÎäî ÌñâÎèôÏùÄ?', options: ['ÏùëÏõêÌïòÍ∏∞', 'Î∞ïÏàòÏπòÍ∏∞', 'ÏÉÅÎåÄÌåÄ ÎπÑÌïò', 'Ìï®ÏÑ±ÏßÄÎ•¥Í∏∞'], answer: 2 },
                { q: 'Ïì∞Î†àÍ∏∞Îäî Ïñ¥ÎñªÍ≤å Ìï¥Ïïº ÌïòÎÇò?', options: ['Î∞îÎã•Ïóê Î≤ÑÎ¶¨Í∏∞', 'ÏßÄÏ†ïÎêú Í≥≥Ïóê Î≤ÑÎ¶¨Í∏∞', 'Í∑∏ÎÉ• ÎëêÍ∏∞', 'ÏùòÏûê Î∞ëÏóê Ïà®Í∏∞Í∏∞'], answer: 1 },
                { q: 'Í≤ΩÍ∏∞Ïû•ÏóêÏÑú ÏÇ¨ÏßÑ Ï∞çÏùÑ Îïå Ï£ºÏùòÌï† Ï†êÏùÄ?', options: ['ÌîåÎûòÏãú ÏºúÍ∏∞', 'ÌîåÎûòÏãú ÎÅÑÍ∏∞', 'ÏïÑÎ¨¥Í±∞ÎÇò', 'ÏÇ¨ÏßÑ Ïïà Ï∞çÍ∏∞'], answer: 1 }
            ]
        };

        // ÏÉâÏÉÅ Î∞è Ïù¥Î™®ÏßÄ ÏòµÏÖò
        const colorOptions = ['#e74c3c', '#3498db', '#2ecc71', '#f39c12'];
        const emojiOptions = ['üòä', 'üòé', 'ü§ó', 'üòÑ', 'ü•≥', 'ü§©', 'üòÅ', 'üôÇ'];

        // Í≤åÏûÑ ÏÉÅÌÉú
        let players = [];
        let currentPlayerIndex = 0;
        let finishOrder = [];
        let gameStarted = false;

        // Ï¥àÍ∏∞Ìôî
        function init() {
            createPlayerSetup();
        }

        // ÌîåÎ†àÏù¥Ïñ¥ ÏÑ§Ï†ï ÌôîÎ©¥ ÏÉùÏÑ±
        function createPlayerSetup() {
            const container = document.getElementById('player-setup');
            container.innerHTML = '';

            for (let i = 0; i < 4; i++) {
                const card = document.createElement('div');
                card.className = 'player-card';
                card.innerHTML = `
                    <h3>ÌîåÎ†àÏù¥Ïñ¥ ${i + 1}</h3>
                    <input type="text" id="player-name-${i}" placeholder="Ïù¥Î¶Ñ ÏûÖÎ†•" maxlength="10" value="ÌîåÎ†àÏù¥Ïñ¥ ${i + 1}">
                    <p style="margin: 10px 0 5px 0; font-weight: bold;">ÏÉâÏÉÅ ÏÑ†ÌÉù:</p>
                    <div class="color-selector" id="color-selector-${i}">
                        ${colorOptions.map((color, idx) => 
                            `<div class="color-option ${idx === i ? 'selected' : ''}" 
                                 style="background: ${color}" 
                                 onclick="selectColor(${i}, '${color}', this)"></div>`
                        ).join('')}
                    </div>
                    <p style="margin: 10px 0 5px 0; font-weight: bold;">ÏïÑÎ∞îÌÉÄ ÏÑ†ÌÉù:</p>
                    <div class="emoji-selector" id="emoji-selector-${i}">
                        ${emojiOptions.map((emoji, idx) => 
                            `<div class="emoji-option ${idx === i % emojiOptions.length ? 'selected' : ''}" 
                                 onclick="selectEmoji(${i}, '${emoji}', this)">${emoji}</div>`
                        ).join('')}
                    </div>
                `;
                container.appendChild(card);
            }

            // Ï¥àÍ∏∞ ÌîåÎ†àÏù¥Ïñ¥ Îç∞Ïù¥ÌÑ∞ ÏÑ§Ï†ï
            players = colorOptions.map((color, i) => ({
                name: `ÌîåÎ†àÏù¥Ïñ¥ ${i + 1}`,
                color: color,
                emoji: emojiOptions[i % emojiOptions.length],
                position: 1,
                moveCount: 0,
                skipTurn: false,
                finished: false,
                finishRank: 0
            }));
        }

        // ÏÉâÏÉÅ ÏÑ†ÌÉù
        function selectColor(playerIndex, color, element) {
            const container = element.parentElement;
            container.querySelectorAll('.color-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            players[playerIndex].color = color;
        }

        // Ïù¥Î™®ÏßÄ ÏÑ†ÌÉù
        function selectEmoji(playerIndex, emoji, element) {
            const container = element.parentElement;
            container.querySelectorAll('.emoji-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            players[playerIndex].emoji = emoji;
        }

        // Í≤åÏûÑ ÏãúÏûë
        function startGame() {
            // ÌîåÎ†àÏù¥Ïñ¥ Ïù¥Î¶Ñ ÏóÖÎç∞Ïù¥Ìä∏
            players.forEach((player, i) => {
                const nameInput = document.getElementById(`player-name-${i}`);
                if (nameInput.value.trim()) {
                    player.name = nameInput.value.trim();
                }
            });

            // ÌôîÎ©¥ Ï†ÑÌôò
            document.getElementById('setup-screen').style.display = 'none';
            document.getElementById('game-screen').classList.add('active');

            gameStarted = true;
            createBoard();
            createPlayersSidebar();
            updateDisplay();
        }

        // Î≥¥ÎìúÌåê ÏÉùÏÑ±
        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            
            cells.forEach((cell) => {
                const cellDiv = document.createElement('div');
                cellDiv.className = `cell ${cell.type}`;
                cellDiv.id = `cell-${cell.num}`;
                cellDiv.innerHTML = `
                    <div class="cell-number">${cell.num}</div>
                    <div class="cell-icon">${cell.icon}</div>
                    <div class="cell-name">${cell.name}</div>
                    <div class="players-on-cell" id="players-cell-${cell.num}"></div>
                `;
                board.appendChild(cellDiv);
            });
        }

        // ÌîåÎ†àÏù¥Ïñ¥ ÏÇ¨Ïù¥ÎìúÎ∞î ÏÉùÏÑ±
        function createPlayersSidebar() {
            const sidebar = document.getElementById('players-sidebar');
            sidebar.innerHTML = '';

            players.forEach((player, index) => {
                const info = document.createElement('div');
                info.className = 'player-info';
                info.id = `player-info-${index}`;
                info.innerHTML = `
                    <div class="player-header">
                        <div class="player-avatar" style="background: ${player.color}">
                            ${player.emoji}
                        </div>
                        <div class="player-name">${player.name}</div>
                    </div>
                    <div class="player-stats" id="player-stats-${index}">
                        üìç ÏúÑÏπò: 1Ïπ∏<br>
                        üé≤ Ïù¥Îèô: 0Ìöå
                    </div>
                `;
                sidebar.appendChild(info);
            });
        }

        // ÌôîÎ©¥ ÏóÖÎç∞Ïù¥Ìä∏
        function updateDisplay() {
            // ÌòÑÏû¨ ÌîåÎ†àÏù¥Ïñ¥ ÌëúÏãú
            const currentPlayer = players[currentPlayerIndex];
            document.getElementById('current-player-banner').innerHTML = 
                `<span style="font-size: 1.5em;">${currentPlayer.emoji}</span> ${currentPlayer.name}Ïùò Ï∞®Î°ÄÏûÖÎãàÎã§!`;

            // ÌîåÎ†àÏù¥Ïñ¥ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
            players.forEach((player, index) => {
                const infoDiv = document.getElementById(`player-info-${index}`);
                infoDiv.className = 'player-info';
                
                if (player.finished) {
                    infoDiv.classList.add('finished');
                } else if (index === currentPlayerIndex) {
                    infoDiv.classList.add('current-turn');
                }

                const statsDiv = document.getElementById(`player-stats-${index}`);
                let statsHTML = `üìç ÏúÑÏπò: ${player.position}Ïπ∏<br>üé≤ Ïù¥Îèô: ${player.moveCount}Ìöå`;
                
                if (player.finished) {
                    statsHTML += `<br><span class="rank-badge">${player.finishRank}Îì± ÏôÑÏ£º!</span>`;
                } else if (index === currentPlayerIndex) {
                    statsHTML += `<br><span class="turn-indicator">‚ñ∂ ÌòÑÏû¨ ÌÑ¥</span>`;
                }
                
                statsDiv.innerHTML = statsHTML;
            });

            // Î≥¥ÎìúÌåê ÏóÖÎç∞Ïù¥Ìä∏
            updateBoard();
        }

        // Î≥¥ÎìúÌåê ÌîåÎ†àÏù¥Ïñ¥ ÏúÑÏπò ÏóÖÎç∞Ïù¥Ìä∏
        function updateBoard() {
            // Î™®Îì† Ïπ∏Ïùò ÌîåÎ†àÏù¥Ïñ¥ Ï†úÍ±∞
            for (let i = 1; i <= 25; i++) {
                const container = document.getElementById(`players-cell-${i}`);
                if (container) container.innerHTML = '';
            }

            // Í∞Å ÌîåÎ†àÏù¥Ïñ¥Î•º Ìï¥Îãπ ÏúÑÏπòÏóê ÌëúÏãú
            players.forEach((player) => {
                const container = document.getElementById(`players-cell-${player.position}`);
                if (container) {
                    const token = document.createElement('div');
                    token.className = 'player-token';
                    token.style.background = player.color;
                    token.textContent = player.emoji;
                    token.title = player.name;
                    container.appendChild(token);
                }
            });
        }

        // Ï£ºÏÇ¨ÏúÑ Íµ¥Î¶¨Í∏∞
        function rollDice() {
            if (!gameStarted) return;

            const currentPlayer = players[currentPlayerIndex];
            
            // Ïù¥ÎØ∏ ÏôÑÏ£ºÌïú ÌîåÎ†àÏù¥Ïñ¥Îäî Ïä§ÌÇµ
            if (currentPlayer.finished) {
                nextTurn();
                return;
            }

            // ÌÑ¥ Ïä§ÌÇµ Ï≤¥ÌÅ¨
            if (currentPlayer.skipTurn) {
                showMessage(`‚è∏Ô∏è ${currentPlayer.name}ÎãòÏùÄ Ïù¥Î≤à ÌÑ¥ÏùÑ Ïâ¨Ïñ¥Í∞ëÎãàÎã§.`);
                currentPlayer.skipTurn = false;
                setTimeout(() => {
                    nextTurn();
                }, 2000);
                return;
            }

            const btn = document.getElementById('roll-btn');
            btn.disabled = true;
            
            const diceElement = document.getElementById('dice');
            diceElement.classList.add('rolling');
            
            // Ï£ºÏÇ¨ÏúÑ Ïï†ÎãàÎ©îÏù¥ÏÖò
            let count = 0;
            const interval = setInterval(() => {
                const tempNum = Math.floor(Math.random() * 6) + 1;
                diceElement.textContent = tempNum;
                count++;
                
                if (count >= 10) {
                    clearInterval(interval);
                    const finalNum = Math.floor(Math.random() * 6) + 1;
                    diceElement.textContent = finalNum;
                    diceElement.classList.remove('rolling');
                    
                    setTimeout(() => {
                        movePlayer(finalNum);
                    }, 500);
                }
            }, 100);
        }

        // ÌîåÎ†àÏù¥Ïñ¥ Ïù¥Îèô
        function movePlayer(steps) {
            const currentPlayer = players[currentPlayerIndex];
            const newPosition = Math.min(currentPlayer.position + steps, 25);
            currentPlayer.position = newPosition;
            currentPlayer.moveCount++;
            
            updateDisplay();
            
            const cell = cells[currentPlayer.position - 1];
            handleCellEffect(cell);
        }

        // Ïπ∏ Ìö®Í≥º Ï≤òÎ¶¨
        function handleCellEffect(cell) {
            const currentPlayer = players[currentPlayerIndex];
            const btn = document.getElementById('roll-btn');
            
            switch (cell.effect) {
                case 'start':
                    showMessage(`üè† ${currentPlayer.name}ÎãòÏù¥ Ï∂úÎ∞úÌï©ÎãàÎã§!`);
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 1500);
                    break;
                    
                case 'finish':
                    currentPlayer.finished = true;
                    finishOrder.push(currentPlayer);
                    currentPlayer.finishRank = finishOrder.length;
                    
                    showMessage(`üéä ${currentPlayer.name}ÎãòÏù¥ ${currentPlayer.finishRank}Îì±ÏúºÎ°ú ÏôÑÏ£ºÌñàÏäµÎãàÎã§!`);
                    
                    // Î™®Îì† ÌîåÎ†àÏù¥Ïñ¥Í∞Ä ÏôÑÏ£ºÌñàÎäîÏßÄ ÌôïÏù∏
                    if (finishOrder.length === players.length) {
                        setTimeout(() => {
                            showFinalResults();
                        }, 2000);
                    } else {
                        setTimeout(() => {
                            nextTurn();
                        }, 2500);
                    }
                    break;
                    
                case 'move':
                    if (cell.value > 0) {
                        showMessage(`üéâ ${currentPlayer.name}Îãò, ${cell.name}! ${cell.value}Ïπ∏ Ï†ÑÏßÑ!`);
                        setTimeout(() => {
                            currentPlayer.position = Math.min(currentPlayer.position + cell.value, 25);
                            updateDisplay();
                            
                            const nextCell = cells[currentPlayer.position - 1];
                            if (nextCell.effect === 'finish') {
                                handleCellEffect(nextCell);
                            } else {
                                setTimeout(() => {
                                    nextTurn();
                                }, 1000);
                            }
                        }, 1500);
                    } else {
                        showMessage(`üò± ${currentPlayer.name}Îãò, ${cell.name}! ${Math.abs(cell.value)}Ïπ∏ ÌõÑÏßÑ...`);
                        setTimeout(() => {
                            currentPlayer.position = Math.max(currentPlayer.position + cell.value, 1);
                            updateDisplay();
                            setTimeout(() => {
                                nextTurn();
                            }, 1000);
                        }, 1500);
                    }
                    break;
                    
                case 'skip':
                    showMessage(`‚è∏Ô∏è ${currentPlayer.name}Îãò, ${cell.name}! Îã§Ïùå ÌÑ¥ Ïâ¨Ïñ¥Í∞ëÎãàÎã§.`);
                    currentPlayer.skipTurn = true;
                    setTimeout(() => {
                        nextTurn();
                    }, 2000);
                    break;
                    
                case 'double':
                    showMessage(`üéä ${currentPlayer.name}Îãò, ${cell.name}! Ìïú Î≤à Îçî Íµ¥Î¶¨ÏÑ∏Ïöî!`);
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 2000);
                    break;
                    
                case 'quiz':
                    showQuiz(cell.category);
                    break;
                    
                case 'random':
                    showRandomEvent();
                    break;
                    
                default:
                    showMessage(`üìç ${currentPlayer.name}Îãò, ${cell.name}Ïóê ÎèÑÏ∞©!`);
                    setTimeout(() => {
                        nextTurn();
                    }, 1500);
            }
        }

        // Îã§Ïùå ÌÑ¥
        function nextTurn() {
            // Îã§Ïùå ÌîåÎ†àÏù¥Ïñ¥Î°ú Ïù¥Îèô (ÏôÑÏ£ºÌïòÏßÄ ÏïäÏùÄ ÌîåÎ†àÏù¥Ïñ¥ Ï∞æÍ∏∞)
            let nextIndex = (currentPlayerIndex + 1) % players.length;
            let attempts = 0;
            
            while (players[nextIndex].finished && attempts < players.length) {
                nextIndex = (nextIndex + 1) % players.length;
                attempts++;
            }
            
            // Î™®Îì† ÌîåÎ†àÏù¥Ïñ¥Í∞Ä ÏôÑÏ£ºÌñàÎã§Î©¥
            if (attempts >= players.length) {
                showFinalResults();
                return;
            }
            
            currentPlayerIndex = nextIndex;
            updateDisplay();
            
            const btn = document.getElementById('roll-btn');
            btn.disabled = false;
            
            const currentPlayer = players[currentPlayerIndex];
            showMessage(`${currentPlayer.emoji} ${currentPlayer.name}ÎãòÏùò Ï∞®Î°ÄÏûÖÎãàÎã§!`);
        }

        // ÌÄ¥Ï¶à ÌëúÏãú
        function showQuiz(category) {
            const currentPlayer = players[currentPlayerIndex];
            const quizList = quizzes[category];
            const quiz = quizList[Math.floor(Math.random() * quizList.length)];
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = `üéØ ${currentPlayer.name}ÎãòÏùò ÌÄ¥Ï¶à!`;
            text.textContent = quiz.q;
            
            buttons.innerHTML = '';
            quiz.options.forEach((option, index) => {
                const btn = document.createElement('div');
                btn.className = 'quiz-option';
                btn.textContent = option;
                btn.onclick = () => {
                    checkQuizAnswer(index, quiz.answer, category);
                };
                buttons.appendChild(btn);
            });
            
            modal.classList.add('show');
        }

        // ÌÄ¥Ï¶à Ï†ïÎãµ ÌôïÏù∏
        function checkQuizAnswer(selected, correct, category) {
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            const currentPlayer = players[currentPlayerIndex];
            
            if (selected === correct) {
                const bonus = category === 'team' ? 3 : 2;
                showMessage(`üéâ ${currentPlayer.name}Îãò Ï†ïÎãµ! ${bonus}Ïπ∏ Ï†ÑÏßÑ!`);
                setTimeout(() => {
                    currentPlayer.position = Math.min(currentPlayer.position + bonus, 25);
                    updateDisplay();
                    
                    const nextCell = cells[currentPlayer.position - 1];
                    if (nextCell.effect === 'finish') {
                        handleCellEffect(nextCell);
                    } else {
                        setTimeout(() => {
                            nextTurn();
                        }, 1000);
                    }
                }, 1500);
            } else {
                const penalty = category === 'team' ? -1 : 0;
                if (penalty < 0) {
                    showMessage(`üò¢ ${currentPlayer.name}Îãò Ïò§Îãµ! ${Math.abs(penalty)}Ïπ∏ ÌõÑÏßÑ...`);
                    setTimeout(() => {
                        currentPlayer.position = Math.max(currentPlayer.position + penalty, 1);
                        updateDisplay();
                        setTimeout(() => {
                            nextTurn();
                        }, 1000);
                    }, 1500);
                } else {
                    showMessage(`üò¢ ${currentPlayer.name}Îãò Ïò§Îãµ! Ï†úÏûêÎ¶¨!`);
                    setTimeout(() => {
                        nextTurn();
                    }, 1500);
                }
            }
        }

        // ÎûúÎç§ Ïù¥Î≤§Ìä∏
        function showRandomEvent() {
            const currentPlayer = players[currentPlayerIndex];
            const events = [
                { name: 'ÌñâÏö¥Ïùò Î£∞Î†õ', value: Math.floor(Math.random() * 5) + 1 },
                { name: 'Í∏∞ÎÖêÌíà ÌöçÎìù', value: 3 },
                { name: 'Ï†ÑÍ¥ëÌåê Îì±Ïû•', value: 2 },
                { name: 'ÍΩù', value: 0 }
            ];
            
            const event = events[Math.floor(Math.random() * events.length)];
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = `üéÅ ${currentPlayer.name}ÎãòÏùò Ïù¥Î≤§Ìä∏!`;
            text.textContent = `${event.name}!\n${event.value > 0 ? `${event.value}Ïπ∏ Ï†ÑÏßÑÌï©ÎãàÎã§!` : 'ÏïÑÏâΩÏßÄÎßå Ï†úÏûêÎ¶¨ÏûÖÎãàÎã§.'}`;
            
            buttons.innerHTML = '<button class="btn btn-success" onclick="closeEventModal(' + event.value + ')">ÌôïÏù∏</button>';
            
            modal.classList.add('show');
        }

        // Ïù¥Î≤§Ìä∏ Î™®Îã¨ Îã´Í∏∞
        function closeEventModal(value) {
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            const currentPlayer = players[currentPlayerIndex];
            
            if (value > 0) {
                setTimeout(() => {
                    currentPlayer.position = Math.min(currentPlayer.position + value, 25);
                    updateDisplay();
                    
                    const nextCell = cells[currentPlayer.position - 1];
                    if (nextCell.effect === 'finish') {
                        handleCellEffect(nextCell);
                    } else {
                        setTimeout(() => {
                            nextTurn();
                        }, 1000);
                    }
                }, 500);
            } else {
                setTimeout(() => {
                    nextTurn();
                }, 500);
            }
        }

        // Î©îÏãúÏßÄ ÌëúÏãú
        function showMessage(msg) {
            document.getElementById('message').textContent = msg;
        }

        // ÏµúÏ¢Ö Í≤∞Í≥º ÌëúÏãú
        function showFinalResults() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = 'üèÜ Í≤åÏûÑ Ï¢ÖÎ£å!';
            
            // ÏàúÏúÑÎåÄÎ°ú Ï†ïÎ†¨
            const rankedPlayers = [...finishOrder];
            
            let resultHTML = '<div class="podium">';
            rankedPlayers.forEach((player, index) => {
                const ranks = ['first', 'second', 'third', 'fourth'];
                const medals = ['ü•á', 'ü•à', 'ü•â', 'üèÖ'];
                resultHTML += `
                    <div class="podium-place ${ranks[index]}">
                        <div class="podium-avatar" style="background: ${player.color}; width: 60px; height: 60px; border-radius: 50%; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; border: 3px solid white;">
                            ${player.emoji}
                        </div>
                        <div class="podium-rank">${medals[index]} ${index + 1}Îì±</div>
                        <div class="podium-name">${player.name}</div>
                        <div class="podium-stats">Ïù¥Îèô: ${player.moveCount}Ìöå</div>
                    </div>
                `;
            });
            resultHTML += '</div>';
            
            text.innerHTML = resultHTML + '<p style="margin-top: 20px;">Î™®Îëê ÏàòÍ≥†ÌïòÏÖ®ÏäµÎãàÎã§! üéâ</p>';
            
            buttons.innerHTML = '<button class="btn btn-primary" onclick="resetGame()">üîÑ ÏÉà Í≤åÏûÑ ÏãúÏûë</button>';
            
            modal.classList.add('show');
            
            createConfetti();
        }

        // Ìè≠Ï£Ω Ìö®Í≥º
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.style.position = 'fixed';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-10px';
                    confetti.style.width = '10px';
                    confetti.style.height = '10px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animation = 'confettiFall 3s linear';
                    confetti.style.zIndex = '9999';
                    confetti.style.borderRadius = '50%';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        // Í≤åÏûÑ Î¶¨ÏÖã
        function resetGame() {
            // Î™®Îã¨ Îã´Í∏∞
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            // Í≤åÏûÑ ÏÉÅÌÉú Ï¥àÍ∏∞Ìôî
            players = [];
            currentPlayerIndex = 0;
            finishOrder = [];
            gameStarted = false;
            
            // ÌôîÎ©¥ Ï†ÑÌôò
            document.getElementById('game-screen').classList.remove('active');
            document.getElementById('setup-screen').style.display = 'block';
            
            // ÌîåÎ†àÏù¥Ïñ¥ ÏÑ§Ï†ï Ïû¨ÏÉùÏÑ±
            createPlayerSetup();
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        window.onload = init;

        // Ìè≠Ï£Ω Ïï†ÎãàÎ©îÏù¥ÏÖò Ï∂îÍ∞Ä
        const style = document.createElement('style');
        style.textContent = `
            @keyframes confettiFall {
                to {
                    transform: translateY(100vh) rotate(720deg);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>