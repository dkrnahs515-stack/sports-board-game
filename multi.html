<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® ìŠ¤í¬ì¸  ì§ê´€ ë§ˆìŠ¤í„° - ë©€í‹°í”Œë ˆì´ì–´</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #333;
        }

        .game-container {
            max-width: 1200px;
            width: 100%;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        /* í”Œë ˆì´ì–´ ì„¤ì • í™”ë©´ */
        .setup-screen {
            text-align: center;
            padding: 40px;
        }

        .setup-screen h2 {
            color: #667eea;
            margin-bottom: 30px;
            font-size: 2em;
        }

        .player-setup {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .player-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            border: 3px solid #dee2e6;
            transition: all 0.3s;
        }

        .player-card.active {
            border-color: #667eea;
            background: #e7f3ff;
        }

        .player-card h3 {
            margin-bottom: 15px;
            color: #495057;
        }

        .player-card input {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            margin-bottom: 10px;
        }

        .player-card input:focus {
            outline: none;
            border-color: #667eea;
        }

        .color-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }

        .color-option:hover {
            transform: scale(1.2);
        }

        .color-option.selected {
            border-color: #333;
            box-shadow: 0 0 0 3px white, 0 0 0 5px #333;
        }

        .emoji-selector {
            display: flex;
            gap: 8px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .emoji-option {
            font-size: 2em;
            cursor: pointer;
            padding: 5px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .emoji-option:hover {
            background: #dee2e6;
            transform: scale(1.2);
        }

        .emoji-option.selected {
            background: #667eea;
        }

        /* ê²Œì„ í™”ë©´ */
        .game-screen {
            display: none;
        }

        .game-screen.active {
            display: block;
        }

        .game-layout {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        /* í”Œë ˆì´ì–´ ì •ë³´ ì‚¬ì´ë“œë°” */
        .players-sidebar {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .player-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            border: 3px solid #dee2e6;
            transition: all 0.3s;
        }

        .player-info.current-turn {
            border-color: #28a745;
            background: #d4edda;
            box-shadow: 0 0 20px rgba(40, 167, 69, 0.3);
            animation: turnPulse 1.5s infinite;
        }

        @keyframes turnPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        .player-info.finished {
            opacity: 0.6;
            border-color: #ffc107;
            background: #fff3cd;
        }

        .player-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .player-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            border: 2px solid white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .player-name {
            font-weight: bold;
            font-size: 1.1em;
            flex: 1;
        }

        .player-stats {
            font-size: 0.9em;
            color: #666;
            line-height: 1.6;
        }

        .turn-indicator {
            background: #28a745;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            font-weight: bold;
            display: inline-block;
            margin-top: 5px;
        }

        .rank-badge {
            background: #ffc107;
            color: #333;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 0.8em;
            font-weight: bold;
            display: inline-block;
        }

        /* ë³´ë“œíŒ ì˜ì—­ */
        .board-area {
            display: flex;
            flex-direction: column;
        }

        .current-player-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 20px;
            background: #e9ecef;
            padding: 15px;
            border-radius: 15px;
        }

        .cell {
            aspect-ratio: 1;
            background: white;
            border: 3px solid #dee2e6;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 8px;
            cursor: help;
            transition: all 0.3s;
            position: relative;
            font-size: 0.85em;
        }

        .cell:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .cell-number {
            position: absolute;
            top: 5px;
            left: 5px;
            background: #495057;
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75em;
            font-weight: bold;
        }

        .cell-icon {
            font-size: 2em;
            margin-bottom: 3px;
        }

        .cell-name {
            font-size: 0.7em;
            text-align: center;
            font-weight: bold;
            color: #495057;
            line-height: 1.2;
        }

        /* ì¹¸ íƒ€ì…ë³„ ìƒ‰ìƒ */
        .cell.start {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            border-color: #4ecca3;
        }

        .cell.finish {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            border-color: #f39c12;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .cell.bonus {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-color: #3498db;
        }

        .cell.trap {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-color: #e74c3c;
        }

        .cell.quiz {
            background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%);
            border-color: #9b59b6;
        }

        .cell.event {
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            border-color: #e056fd;
        }

        .players-on-cell {
            position: absolute;
            bottom: 5px;
            right: 5px;
            display: flex;
            gap: 2px;
            flex-wrap: wrap;
            max-width: 70%;
            justify-content: flex-end;
        }

        .player-token {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1em;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            animation: tokenBounce 0.5s;
        }

        @keyframes tokenBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .dice-container {
            text-align: center;
        }

        .dice {
            width: 80px;
            height: 80px;
            background: white;
            border: 4px solid #667eea;
            border-radius: 15px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }

        .dice.rolling {
            animation: diceRoll 0.5s;
        }

        @keyframes diceRoll {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-success {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .message {
            text-align: center;
            padding: 20px;
            background: #e3f2fd;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            color: #1976d2;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            border: 2px solid #90caf9;
        }

        /* ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: modalSlideIn 0.3s;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content h2 {
            margin-bottom: 20px;
            color: #667eea;
            font-size: 2em;
        }

        .modal-content p {
            margin-bottom: 20px;
            font-size: 1.2em;
            line-height: 1.6;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }

        .quiz-option {
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
        }

        .quiz-option:hover {
            background: #e9ecef;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .podium {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 20px;
            margin: 30px 0;
        }

        .podium-place {
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            min-width: 120px;
        }

        .podium-place.first {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            order: 2;
            transform: scale(1.1);
        }

        .podium-place.second {
            background: linear-gradient(135deg, #c2e9fb 0%, #a1c4fd 100%);
            order: 1;
        }

        .podium-place.third {
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            order: 3;
        }

        .podium-place.fourth {
            background: linear-gradient(135deg, #e0c3fc 0%, #8ec5fc 100%);
            order: 4;
        }

        .podium-avatar {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .podium-rank {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .podium-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .podium-stats {
            font-size: 0.9em;
            color: #666;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 1024px) {
            .game-layout {
                grid-template-columns: 1fr;
            }

            .players-sidebar {
                flex-direction: row;
                overflow-x: auto;
            }

            .player-info {
                min-width: 200px;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .board {
                gap: 5px;
                padding: 10px;
            }

            .cell {
                padding: 5px;
            }

            .cell-icon {
                font-size: 1.5em;
            }

            .cell-name {
                font-size: 0.6em;
            }

            .player-token {
                width: 24px;
                height: 24px;
                font-size: 0.9em;
            }

            .player-setup {
                grid-template-columns: 1fr;
            }

            .podium {
                flex-direction: column;
                align-items: center;
            }

            .podium-place {
                width: 100%;
                max-width: 300px;
            }

            .podium-place.first,
            .podium-place.second,
            .podium-place.third,
            .podium-place.fourth {
                order: initial !important;
                transform: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸ® ìŠ¤í¬ì¸  ì§ê´€ ë§ˆìŠ¤í„°</h1>
        <p class="subtitle">ë©€í‹°í”Œë ˆì´ì–´ ë³´ë“œê²Œì„ (ìµœëŒ€ 4ëª…)</p>

        <!-- í”Œë ˆì´ì–´ ì„¤ì • í™”ë©´ -->
        <div class="setup-screen" id="setup-screen">
            <h2>ğŸ‘¥ í”Œë ˆì´ì–´ ì„¤ì •</h2>
            <div class="player-setup" id="player-setup">
                <!-- í”Œë ˆì´ì–´ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
            <button class="btn btn-success" onclick="startGame()" style="font-size: 1.3em; padding: 20px 50px;">
                ğŸ® ê²Œì„ ì‹œì‘!
            </button>
        </div>

        <!-- ê²Œì„ í™”ë©´ -->
        <div class="game-screen" id="game-screen">
            <div class="game-layout">
                <!-- í”Œë ˆì´ì–´ ì •ë³´ ì‚¬ì´ë“œë°” -->
                <div class="players-sidebar" id="players-sidebar">
                    <!-- í”Œë ˆì´ì–´ ì •ë³´ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>

                <!-- ë³´ë“œíŒ ì˜ì—­ -->
                <div class="board-area">
                    <div class="current-player-banner" id="current-player-banner">
                        í”Œë ˆì´ì–´ 1ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤!
                    </div>

                    <div class="message" id="message">
                        ğŸ  ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤! ì£¼ì‚¬ìœ„ë¥¼ êµ´ë ¤ì£¼ì„¸ìš”!
                    </div>

                    <div class="board" id="board">
                        <!-- ë³´ë“œíŒì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
                    </div>

                    <div class="controls">
                        <div class="dice-container">
                            <div class="dice" id="dice">ğŸ²</div>
                        </div>
                        <button class="btn btn-primary" id="roll-btn" onclick="rollDice()">
                            ğŸ² ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°
                        </button>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="resetGame()">
                    ğŸ”„ ìƒˆ ê²Œì„ ì‹œì‘
                </button>
            </div>
        </div>
    </div>

    <!-- ëª¨ë‹¬ -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h2 id="modal-title">ì œëª©</h2>
            <p id="modal-text">ë‚´ìš©</p>
            <div id="modal-buttons" class="btn-group">
                <!-- ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <script>
        // ê²Œì„ ë°ì´í„°
        const cells = [
            { num: 1, icon: 'ğŸ ', name: 'ì¶œë°œ', type: 'start', effect: 'start' },
            { num: 2, icon: 'ğŸ“±', name: 'í‹°ì¼“ì˜ˆë§¤', type: 'bonus', effect: 'move', value: 2 },
            { num: 3, icon: 'ğŸ’³', name: 'êµí†µì¹´ë“œì¶©ì „ê¹œë¹¡', type: 'trap', effect: 'skip', value: 1 },
            { num: 4, icon: 'ğŸ¯', name: 'íŒ€í€´ì¦ˆ', type: 'quiz', effect: 'quiz', category: 'team' },
            { num: 5, icon: 'ğŸš‡', name: 'ì§€í•˜ì² íƒ‘ìŠ¹', type: 'normal', effect: 'none' },
            { num: 6, icon: 'ğŸŸï¸', name: 'ê²½ê¸°ì¥ë„ì°©', type: 'bonus', effect: 'move', value: 1 },
            { num: 7, icon: 'ğŸµ', name: 'ì‘ì›ê°€ì•”ê¸°', type: 'bonus', effect: 'double', value: 1 },
            { num: 8, icon: 'ğŸš»', name: 'í™”ì¥ì‹¤ëŒ€ê¸°ì¤„', type: 'trap', effect: 'skip', value: 1 },
            { num: 9, icon: 'ğŸ“¸', name: 'í¬í† ì¡´', type: 'normal', effect: 'none' },
            { num: 10, icon: 'ğŸ•', name: 'ê°„ì‹êµ¬ë§¤', type: 'normal', effect: 'none' },
            { num: 11, icon: 'ğŸ’º', name: 'ì¢‹ì€ìë¦¬ì„ ì ', type: 'bonus', effect: 'move', value: 3 },
            { num: 12, icon: 'âš½', name: 'ì¢…ëª©í€´ì¦ˆ', type: 'quiz', effect: 'quiz', category: 'sport' },
            { num: 13, icon: 'ğŸ‰', name: 'ê²½ê¸°ì‹œì‘', type: 'event', effect: 'move', value: 1 },
            { num: 14, icon: 'ğŸ˜±', name: 'ê°„ì‹ìŸìŒ', type: 'trap', effect: 'move', value: -2 },
            { num: 15, icon: 'ğŸ¤', name: 'ì‘ì›ë§¤ë„ˆí€´ì¦ˆ', type: 'quiz', effect: 'quiz', category: 'manner' },
            { num: 16, icon: 'ğŸ“¢', name: 'ì‘ì›ê°€í•©ì°½', type: 'bonus', effect: 'move', value: 1 },
            { num: 17, icon: 'âš¡', name: 'ìš°ë¦¬íŒ€ë“ì !', type: 'bonus', effect: 'move', value: 5 },
            { num: 18, icon: 'ğŸ“±', name: 'ë°°í„°ë¦¬ë¶€ì¡±', type: 'trap', effect: 'skip', value: 1 },
            { num: 19, icon: 'ğŸ', name: 'ê²½ê¸°ì¥ì´ë²¤íŠ¸', type: 'event', effect: 'random' },
            { num: 20, icon: 'ğŸµ', name: 'í•˜í”„íƒ€ì„ì‡¼', type: 'normal', effect: 'none' },
            { num: 21, icon: 'ğŸ—', name: 'ì¹˜í‚¨ë¨¹ë°©', type: 'bonus', effect: 'move', value: 1 },
            { num: 22, icon: 'ğŸ˜¢', name: 'ìš°ë¦¬íŒ€ì‹¤ì ', type: 'trap', effect: 'move', value: -1 },
            { num: 23, icon: 'ğŸ†', name: 'ê·¹ì ì¸ì—­ì „ìŠ¹', type: 'bonus', effect: 'move', value: 4 },
            { num: 24, icon: 'ğŸ‘', name: 'ì„ ìˆ˜ì‚¬ì¸íšŒ', type: 'event', effect: 'move', value: 2 },
            { num: 25, icon: 'ğŸŠ', name: 'ê³¨ì¸!', type: 'finish', effect: 'finish' }
        ];

        // í€´ì¦ˆ ë°ì´í„°
        const quizzes = {
            team: [
                { q: 'FCì„œìš¸ì˜ ë§ˆìŠ¤ì½”íŠ¸ ì´ë¦„ì€?', options: ['ì„œìš¸ì´', 'ê°•ì›ì´', 'ë¶€ì²œì´', 'ì¸ì²œì´'], answer: 0 },
                { q: 'ë‘ì‚°ë² ì–´ìŠ¤ì˜ ìƒì§• ë™ë¬¼ì€?', options: ['í˜¸ë‘ì´', 'ê³°', 'ì‚¬ì', 'ë…ìˆ˜ë¦¬'], answer: 1 },
                { q: 'Kë¦¬ê·¸ëŠ” ëª‡ ê°œ ë¦¬ê·¸ë¡œ ë‚˜ë‰˜ì–´ì ¸ ìˆë‚˜?', options: ['1ê°œ', '2ê°œ', '3ê°œ', '4ê°œ'], answer: 1 },
                { q: 'KBOëŠ” ëª‡ ê°œ íŒ€ì´ ì°¸ê°€í•˜ë‚˜?', options: ['8ê°œ', '9ê°œ', '10ê°œ', '12ê°œ'], answer: 2 }
            ],
            sport: [
                { q: 'ì¶•êµ¬ ê²½ê¸°ëŠ” ì „í›„ë°˜ ëª‡ ë¶„ì”©ì¸ê°€?', options: ['40ë¶„', '45ë¶„', '50ë¶„', '60ë¶„'], answer: 1 },
                { q: 'ì•¼êµ¬ì—ì„œ ìŠ¤íŠ¸ë¼ì´í¬ ëª‡ ê°œë©´ ì•„ì›ƒì¸ê°€?', options: ['2ê°œ', '3ê°œ', '4ê°œ', '5ê°œ'], answer: 1 },
                { q: 'ì¶•êµ¬ì—ì„œ ì†ìœ¼ë¡œ ê³µì„ ì¡ì„ ìˆ˜ ìˆëŠ” ì„ ìˆ˜ëŠ”?', options: ['ê³µê²©ìˆ˜', 'ë¯¸ë“œí•„ë”', 'ìˆ˜ë¹„ìˆ˜', 'ê³¨í‚¤í¼'], answer: 3 },
                { q: 'ì•¼êµ¬ëŠ” ëª‡ ì´ë‹ê¹Œì§€ ì§„í–‰í•˜ë‚˜?', options: ['7ì´ë‹', '8ì´ë‹', '9ì´ë‹', '10ì´ë‹'], answer: 2 }
            ],
            manner: [
                { q: 'ìƒëŒ€íŒ€ì—ê²Œ í•´ì•¼ í•  ì˜¬ë°”ë¥¸ í–‰ë™ì€?', options: ['ì•¼ìœ í•˜ê¸°', 'ì¢‹ì€ í”Œë ˆì´ì— ë°•ìˆ˜', 'ìš•í•˜ê¸°', 'ë¬´ì‹œí•˜ê¸°'], answer: 1 },
                { q: 'ê²½ê¸° ì¤‘ í•˜ë©´ ì•ˆ ë˜ëŠ” í–‰ë™ì€?', options: ['ì‘ì›í•˜ê¸°', 'ë°•ìˆ˜ì¹˜ê¸°', 'ìƒëŒ€íŒ€ ë¹„í•˜', 'í•¨ì„±ì§€ë¥´ê¸°'], answer: 2 },
                { q: 'ì“°ë ˆê¸°ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜?', options: ['ë°”ë‹¥ì— ë²„ë¦¬ê¸°', 'ì§€ì •ëœ ê³³ì— ë²„ë¦¬ê¸°', 'ê·¸ëƒ¥ ë‘ê¸°', 'ì˜ì ë°‘ì— ìˆ¨ê¸°ê¸°'], answer: 1 },
                { q: 'ê²½ê¸°ì¥ì—ì„œ ì‚¬ì§„ ì°ì„ ë•Œ ì£¼ì˜í•  ì ì€?', options: ['í”Œë˜ì‹œ ì¼œê¸°', 'í”Œë˜ì‹œ ë„ê¸°', 'ì•„ë¬´ê±°ë‚˜', 'ì‚¬ì§„ ì•ˆ ì°ê¸°'], answer: 1 }
            ]
        };

        // ìƒ‰ìƒ ë° ì´ëª¨ì§€ ì˜µì…˜
        const colorOptions = ['#e74c3c', '#3498db', '#2ecc71', '#f39c12'];
        const emojiOptions = ['ğŸ˜Š', 'ğŸ˜', 'ğŸ¤—', 'ğŸ˜„', 'ğŸ¥³', 'ğŸ¤©', 'ğŸ˜', 'ğŸ™‚'];

        // ê²Œì„ ìƒíƒœ
        let players = [];
        let currentPlayerIndex = 0;
        let finishOrder = [];
        let gameStarted = false;

        // ì´ˆê¸°í™”
        function init() {
            createPlayerSetup();
        }

        // í”Œë ˆì´ì–´ ì„¤ì • í™”ë©´ ìƒì„±
        function createPlayerSetup() {
            const container = document.getElementById('player-setup');
            container.innerHTML = '';

            for (let i = 0; i < 4; i++) {
                const card = document.createElement('div');
                card.className = 'player-card';
                card.innerHTML = `
                    <h3>í”Œë ˆì´ì–´ ${i + 1}</h3>
                    <input type="text" id="player-name-${i}" placeholder="ì´ë¦„ ì…ë ¥" maxlength="10" value="í”Œë ˆì´ì–´ ${i + 1}">
                    <p style="margin: 10px 0 5px 0; font-weight: bold;">ìƒ‰ìƒ ì„ íƒ:</p>
                    <div class="color-selector" id="color-selector-${i}">
                        ${colorOptions.map((color, idx) => 
                            `<div class="color-option ${idx === i ? 'selected' : ''}" 
                                 style="background: ${color}" 
                                 onclick="selectColor(${i}, '${color}', this)"></div>`
                        ).join('')}
                    </div>
                    <p style="margin: 10px 0 5px 0; font-weight: bold;">ì•„ë°”íƒ€ ì„ íƒ:</p>
                    <div class="emoji-selector" id="emoji-selector-${i}">
                        ${emojiOptions.map((emoji, idx) => 
                            `<div class="emoji-option ${idx === i % emojiOptions.length ? 'selected' : ''}" 
                                 onclick="selectEmoji(${i}, '${emoji}', this)">${emoji}</div>`
                        ).join('')}
                    </div>
                `;
                container.appendChild(card);
            }

            // ì´ˆê¸° í”Œë ˆì´ì–´ ë°ì´í„° ì„¤ì •
            players = colorOptions.map((color, i) => ({
                name: `í”Œë ˆì´ì–´ ${i + 1}`,
                color: color,
                emoji: emojiOptions[i % emojiOptions.length],
                position: 1,
                moveCount: 0,
                skipTurn: false,
                finished: false,
                finishRank: 0
            }));
        }

        // ìƒ‰ìƒ ì„ íƒ
        function selectColor(playerIndex, color, element) {
            const container = element.parentElement;
            container.querySelectorAll('.color-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            players[playerIndex].color = color;
        }

        // ì´ëª¨ì§€ ì„ íƒ
        function selectEmoji(playerIndex, emoji, element) {
            const container = element.parentElement;
            container.querySelectorAll('.emoji-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            players[playerIndex].emoji = emoji;
        }

        // ê²Œì„ ì‹œì‘
        function startGame() {
            // í”Œë ˆì´ì–´ ì´ë¦„ ì—…ë°ì´íŠ¸
            players.forEach((player, i) => {
                const nameInput = document.getElementById(`player-name-${i}`);
                if (nameInput.value.trim()) {
                    player.name = nameInput.value.trim();
                }
            });

            // í™”ë©´ ì „í™˜
            document.getElementById('setup-screen').style.display = 'none';
            document.getElementById('game-screen').classList.add('active');

            gameStarted = true;
            createBoard();
            createPlayersSidebar();
            updateDisplay();
        }

        // ë³´ë“œíŒ ìƒì„±
        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            
            cells.forEach((cell) => {
                const cellDiv = document.createElement('div');
                cellDiv.className = `cell ${cell.type}`;
                cellDiv.id = `cell-${cell.num}`;
                cellDiv.innerHTML = `
                    <div class="cell-number">${cell.num}</div>
                    <div class="cell-icon">${cell.icon}</div>
                    <div class="cell-name">${cell.name}</div>
                    <div class="players-on-cell" id="players-cell-${cell.num}"></div>
                `;
                board.appendChild(cellDiv);
            });
        }

        // í”Œë ˆì´ì–´ ì‚¬ì´ë“œë°” ìƒì„±
        function createPlayersSidebar() {
            const sidebar = document.getElementById('players-sidebar');
            sidebar.innerHTML = '';

            players.forEach((player, index) => {
                const info = document.createElement('div');
                info.className = 'player-info';
                info.id = `player-info-${index}`;
                info.innerHTML = `
                    <div class="player-header">
                        <div class="player-avatar" style="background: ${player.color}">
                            ${player.emoji}
                        </div>
                        <div class="player-name">${player.name}</div>
                    </div>
                    <div class="player-stats" id="player-stats-${index}">
                        ğŸ“ ìœ„ì¹˜: 1ì¹¸<br>
                        ğŸ² ì´ë™: 0íšŒ
                    </div>
                `;
                sidebar.appendChild(info);
            });
        }

        // í™”ë©´ ì—…ë°ì´íŠ¸
        function updateDisplay() {
            // í˜„ì¬ í”Œë ˆì´ì–´ í‘œì‹œ
            const currentPlayer = players[currentPlayerIndex];
            document.getElementById('current-player-banner').innerHTML = 
                `<span style="font-size: 1.5em;">${currentPlayer.emoji}</span> ${currentPlayer.name}ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤!`;

            // í”Œë ˆì´ì–´ ì •ë³´ ì—…ë°ì´íŠ¸
            players.forEach((player, index) => {
                const infoDiv = document.getElementById(`player-info-${index}`);
                infoDiv.className = 'player-info';
                
                if (player.finished) {
                    infoDiv.classList.add('finished');
                } else if (index === currentPlayerIndex) {
                    infoDiv.classList.add('current-turn');
                }

                const statsDiv = document.getElementById(`player-stats-${index}`);
                let statsHTML = `ğŸ“ ìœ„ì¹˜: ${player.position}ì¹¸<br>ğŸ² ì´ë™: ${player.moveCount}íšŒ`;
                
                if (player.finished) {
                    statsHTML += `<br><span class="rank-badge">${player.finishRank}ë“± ì™„ì£¼!</span>`;
                } else if (index === currentPlayerIndex) {
                    statsHTML += `<br><span class="turn-indicator">â–¶ í˜„ì¬ í„´</span>`;
                }
                
                statsDiv.innerHTML = statsHTML;
            });

            // ë³´ë“œíŒ ì—…ë°ì´íŠ¸
            updateBoard();
        }

        // ë³´ë“œíŒ í”Œë ˆì´ì–´ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
        function updateBoard() {
            // ëª¨ë“  ì¹¸ì˜ í”Œë ˆì´ì–´ ì œê±°
            for (let i = 1; i <= 25; i++) {
                const container = document.getElementById(`players-cell-${i}`);
                if (container) container.innerHTML = '';
            }

            // ê° í”Œë ˆì´ì–´ë¥¼ í•´ë‹¹ ìœ„ì¹˜ì— í‘œì‹œ
            players.forEach((player) => {
                const container = document.getElementById(`players-cell-${player.position}`);
                if (container) {
                    const token = document.createElement('div');
                    token.className = 'player-token';
                    token.style.background = player.color;
                    token.textContent = player.emoji;
                    token.title = player.name;
                    container.appendChild(token);
                }
            });
        }

        // ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°
        function rollDice() {
            if (!gameStarted) return;

            const currentPlayer = players[currentPlayerIndex];
            
            // ì´ë¯¸ ì™„ì£¼í•œ í”Œë ˆì´ì–´ëŠ” ìŠ¤í‚µ
            if (currentPlayer.finished) {
                nextTurn();
                return;
            }

            // í„´ ìŠ¤í‚µ ì²´í¬
            if (currentPlayer.skipTurn) {
                showMessage(`â¸ï¸ ${currentPlayer.name}ë‹˜ì€ ì´ë²ˆ í„´ì„ ì‰¬ì–´ê°‘ë‹ˆë‹¤.`);
                currentPlayer.skipTurn = false;
                setTimeout(() => {
                    nextTurn();
                }, 2000);
                return;
            }

            const btn = document.getElementById('roll-btn');
            btn.disabled = true;
            
            const diceElement = document.getElementById('dice');
            diceElement.classList.add('rolling');
            
            // ì£¼ì‚¬ìœ„ ì• ë‹ˆë©”ì´ì…˜
            let count = 0;
            const interval = setInterval(() => {
                const tempNum = Math.floor(Math.random() * 6) + 1;
                diceElement.textContent = tempNum;
                count++;
                
                if (count >= 10) {
                    clearInterval(interval);
                    const finalNum = Math.floor(Math.random() * 6) + 1;
                    diceElement.textContent = finalNum;
                    diceElement.classList.remove('rolling');
                    
                    setTimeout(() => {
                        movePlayer(finalNum);
                    }, 500);
                }
            }, 100);
        }

        // í”Œë ˆì´ì–´ ì´ë™
        function movePlayer(steps) {
            const currentPlayer = players[currentPlayerIndex];
            const newPosition = Math.min(currentPlayer.position + steps, 25);
            currentPlayer.position = newPosition;
            currentPlayer.moveCount++;
            
            updateDisplay();
            
            const cell = cells[currentPlayer.position - 1];
            handleCellEffect(cell);
        }

        // ì¹¸ íš¨ê³¼ ì²˜ë¦¬
        function handleCellEffect(cell) {
            const currentPlayer = players[currentPlayerIndex];
            const btn = document.getElementById('roll-btn');
            
            switch (cell.effect) {
                case 'start':
                    showMessage(`ğŸ  ${currentPlayer.name}ë‹˜ì´ ì¶œë°œí•©ë‹ˆë‹¤!`);
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 1500);
                    break;
                    
                case 'finish':
                    currentPlayer.finished = true;
                    finishOrder.push(currentPlayer);
                    currentPlayer.finishRank = finishOrder.length;
                    
                    showMessage(`ğŸŠ ${currentPlayer.name}ë‹˜ì´ ${currentPlayer.finishRank}ë“±ìœ¼ë¡œ ì™„ì£¼í–ˆìŠµë‹ˆë‹¤!`);
                    
                    // ëª¨ë“  í”Œë ˆì´ì–´ê°€ ì™„ì£¼í–ˆëŠ”ì§€ í™•ì¸
                    if (finishOrder.length === players.length) {
                        setTimeout(() => {
                            showFinalResults();
                        }, 2000);
                    } else {
                        setTimeout(() => {
                            nextTurn();
                        }, 2500);
                    }
                    break;
                    
                case 'move':
                    if (cell.value > 0) {
                        showMessage(`ğŸ‰ ${currentPlayer.name}ë‹˜, ${cell.name}! ${cell.value}ì¹¸ ì „ì§„!`);
                        setTimeout(() => {
                            currentPlayer.position = Math.min(currentPlayer.position + cell.value, 25);
                            updateDisplay();
                            
                            const nextCell = cells[currentPlayer.position - 1];
                            if (nextCell.effect === 'finish') {
                                handleCellEffect(nextCell);
                            } else {
                                setTimeout(() => {
                                    nextTurn();
                                }, 1000);
                            }
                        }, 1500);
                    } else {
                        showMessage(`ğŸ˜± ${currentPlayer.name}ë‹˜, ${cell.name}! ${Math.abs(cell.value)}ì¹¸ í›„ì§„...`);
                        setTimeout(() => {
                            currentPlayer.position = Math.max(currentPlayer.position + cell.value, 1);
                            updateDisplay();
                            setTimeout(() => {
                                nextTurn();
                            }, 1000);
                        }, 1500);
                    }
                    break;
                    
                case 'skip':
                    showMessage(`â¸ï¸ ${currentPlayer.name}ë‹˜, ${cell.name}! ë‹¤ìŒ í„´ ì‰¬ì–´ê°‘ë‹ˆë‹¤.`);
                    currentPlayer.skipTurn = true;
                    setTimeout(() => {
                        nextTurn();
                    }, 2000);
                    break;
                    
                case 'double':
                    showMessage(`ğŸŠ ${currentPlayer.name}ë‹˜, ${cell.name}! í•œ ë²ˆ ë” êµ´ë¦¬ì„¸ìš”!`);
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 2000);
                    break;
                    
                case 'quiz':
                    showQuiz(cell.category);
                    break;
                    
                case 'random':
                    showRandomEvent();
                    break;
                    
                default:
                    showMessage(`ğŸ“ ${currentPlayer.name}ë‹˜, ${cell.name}ì— ë„ì°©!`);
                    setTimeout(() => {
                        nextTurn();
                    }, 1500);
            }
        }

        // ë‹¤ìŒ í„´
        function nextTurn() {
            // ë‹¤ìŒ í”Œë ˆì´ì–´ë¡œ ì´ë™ (ì™„ì£¼í•˜ì§€ ì•Šì€ í”Œë ˆì´ì–´ ì°¾ê¸°)
            let nextIndex = (currentPlayerIndex + 1) % players.length;
            let attempts = 0;
            
            while (players[nextIndex].finished && attempts < players.length) {
                nextIndex = (nextIndex + 1) % players.length;
                attempts++;
            }
            
            // ëª¨ë“  í”Œë ˆì´ì–´ê°€ ì™„ì£¼í–ˆë‹¤ë©´
            if (attempts >= players.length) {
                showFinalResults();
                return;
            }
            
            currentPlayerIndex = nextIndex;
            updateDisplay();
            
            const btn = document.getElementById('roll-btn');
            btn.disabled = false;
            
            const currentPlayer = players[currentPlayerIndex];
            showMessage(`${currentPlayer.emoji} ${currentPlayer.name}ë‹˜ì˜ ì°¨ë¡€ì…ë‹ˆë‹¤!`);
        }

        // í€´ì¦ˆ í‘œì‹œ
        function showQuiz(category) {
            const currentPlayer = players[currentPlayerIndex];
            const quizList = quizzes[category];
            const quiz = quizList[Math.floor(Math.random() * quizList.length)];
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = `ğŸ¯ ${currentPlayer.name}ë‹˜ì˜ í€´ì¦ˆ!`;
            text.textContent = quiz.q;
            
            buttons.innerHTML = '';
            quiz.options.forEach((option, index) => {
                const btn = document.createElement('div');
                btn.className = 'quiz-option';
                btn.textContent = option;
                btn.onclick = () => {
                    checkQuizAnswer(index, quiz.answer, category);
                };
                buttons.appendChild(btn);
            });
            
            modal.classList.add('show');
        }

        // í€´ì¦ˆ ì •ë‹µ í™•ì¸
        function checkQuizAnswer(selected, correct, category) {
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            const currentPlayer = players[currentPlayerIndex];
            
            if (selected === correct) {
                const bonus = category === 'team' ? 3 : 2;
                showMessage(`ğŸ‰ ${currentPlayer.name}ë‹˜ ì •ë‹µ! ${bonus}ì¹¸ ì „ì§„!`);
                setTimeout(() => {
                    currentPlayer.position = Math.min(currentPlayer.position + bonus, 25);
                    updateDisplay();
                    
                    const nextCell = cells[currentPlayer.position - 1];
                    if (nextCell.effect === 'finish') {
                        handleCellEffect(nextCell);
                    } else {
                        setTimeout(() => {
                            nextTurn();
                        }, 1000);
                    }
                }, 1500);
            } else {
                const penalty = category === 'team' ? -1 : 0;
                if (penalty < 0) {
                    showMessage(`ğŸ˜¢ ${currentPlayer.name}ë‹˜ ì˜¤ë‹µ! ${Math.abs(penalty)}ì¹¸ í›„ì§„...`);
                    setTimeout(() => {
                        currentPlayer.position = Math.max(currentPlayer.position + penalty, 1);
                        updateDisplay();
                        setTimeout(() => {
                            nextTurn();
                        }, 1000);
                    }, 1500);
                } else {
                    showMessage(`ğŸ˜¢ ${currentPlayer.name}ë‹˜ ì˜¤ë‹µ! ì œìë¦¬!`);
                    setTimeout(() => {
                        nextTurn();
                    }, 1500);
                }
            }
        }

        // ëœë¤ ì´ë²¤íŠ¸
        function showRandomEvent() {
            const currentPlayer = players[currentPlayerIndex];
            const events = [
                { name: 'í–‰ìš´ì˜ ë£°ë ›', value: Math.floor(Math.random() * 5) + 1 },
                { name: 'ê¸°ë…í’ˆ íšë“', value: 3 },
                { name: 'ì „ê´‘íŒ ë“±ì¥', value: 2 },
                { name: 'ê½', value: 0 }
            ];
            
            const event = events[Math.floor(Math.random() * events.length)];
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = `ğŸ ${currentPlayer.name}ë‹˜ì˜ ì´ë²¤íŠ¸!`;
            text.textContent = `${event.name}!\n${event.value > 0 ? `${event.value}ì¹¸ ì „ì§„í•©ë‹ˆë‹¤!` : 'ì•„ì‰½ì§€ë§Œ ì œìë¦¬ì…ë‹ˆë‹¤.'}`;
            
            buttons.innerHTML = '<button class="btn btn-success" onclick="closeEventModal(' + event.value + ')">í™•ì¸</button>';
            
            modal.classList.add('show');
        }

        // ì´ë²¤íŠ¸ ëª¨ë‹¬ ë‹«ê¸°
        function closeEventModal(value) {
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            const currentPlayer = players[currentPlayerIndex];
            
            if (value > 0) {
                setTimeout(() => {
                    currentPlayer.position = Math.min(currentPlayer.position + value, 25);
                    updateDisplay();
                    
                    const nextCell = cells[currentPlayer.position - 1];
                    if (nextCell.effect === 'finish') {
                        handleCellEffect(nextCell);
                    } else {
                        setTimeout(() => {
                            nextTurn();
                        }, 1000);
                    }
                }, 500);
            } else {
                setTimeout(() => {
                    nextTurn();
                }, 500);
            }
        }

        // ë©”ì‹œì§€ í‘œì‹œ
        function showMessage(msg) {
            document.getElementById('message').textContent = msg;
        }

        // ìµœì¢… ê²°ê³¼ í‘œì‹œ
        function showFinalResults() {
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = 'ğŸ† ê²Œì„ ì¢…ë£Œ!';
            
            // ìˆœìœ„ëŒ€ë¡œ ì •ë ¬
            const rankedPlayers = [...finishOrder];
            
            let resultHTML = '<div class="podium">';
            rankedPlayers.forEach((player, index) => {
                const ranks = ['first', 'second', 'third', 'fourth'];
                const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰', 'ğŸ…'];
                resultHTML += `
                    <div class="podium-place ${ranks[index]}">
                        <div class="podium-avatar" style="background: ${player.color}; width: 60px; height: 60px; border-radius: 50%; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; border: 3px solid white;">
                            ${player.emoji}
                        </div>
                        <div class="podium-rank">${medals[index]} ${index + 1}ë“±</div>
                        <div class="podium-name">${player.name}</div>
                        <div class="podium-stats">ì´ë™: ${player.moveCount}íšŒ</div>
                    </div>
                `;
            });
            resultHTML += '</div>';
            
            text.innerHTML = resultHTML + '<p style="margin-top: 20px;">ëª¨ë‘ ìˆ˜ê³ í•˜ì…¨ìŠµë‹ˆë‹¤! ğŸ‰</p>';
            
            buttons.innerHTML = '<button class="btn btn-primary" onclick="resetGame()">ğŸ”„ ìƒˆ ê²Œì„ ì‹œì‘</button>';
            
            modal.classList.add('show');
            
            createConfetti();
        }

        // í­ì£½ íš¨ê³¼
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            for (let i = 0; i < 100; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.style.position = 'fixed';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-10px';
                    confetti.style.width = '10px';
                    confetti.style.height = '10px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animation = 'confettiFall 3s linear';
                    confetti.style.zIndex = '9999';
                    confetti.style.borderRadius = '50%';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        // ê²Œì„ ë¦¬ì…‹
        function resetGame() {
            // ëª¨ë‹¬ ë‹«ê¸°
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            // ê²Œì„ ìƒíƒœ ì´ˆê¸°í™”
            players = [];
            currentPlayerIndex = 0;
            finishOrder = [];
            gameStarted = false;
            
            // í™”ë©´ ì „í™˜
            document.getElementById('game-screen').classList.remove('active');
            document.getElementById('setup-screen').style.display = 'block';
            
            // í”Œë ˆì´ì–´ ì„¤ì • ì¬ìƒì„±
            createPlayerSetup();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = init;

        // í­ì£½ ì• ë‹ˆë©”ì´ì…˜ ì¶”ê°€
        const style = document.createElement('style');
        style.textContent = `
            @keyframes confettiFall {
                to {
                    transform: translateY(100vh) rotate(720deg);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>