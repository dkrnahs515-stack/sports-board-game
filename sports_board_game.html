<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® ìŠ¤í¬ì¸  ì§ê´€ ë§ˆìŠ¤í„° - ë³´ë“œê²Œì„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #333;
        }

        .game-container {
            max-width: 900px;
            width: 100%;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1em;
            font-weight: bold;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 25px;
            background: #e9ecef;
            padding: 15px;
            border-radius: 15px;
        }

        .cell {
            aspect-ratio: 1;
            background: white;
            border: 3px solid #dee2e6;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 8px;
            cursor: help;
            transition: all 0.3s;
            position: relative;
            font-size: 0.85em;
        }

        .cell:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .cell-number {
            position: absolute;
            top: 5px;
            left: 5px;
            background: #495057;
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75em;
            font-weight: bold;
        }

        .cell-icon {
            font-size: 2em;
            margin-bottom: 3px;
        }

        .cell-name {
            font-size: 0.75em;
            text-align: center;
            font-weight: bold;
            color: #495057;
            line-height: 1.2;
        }

        /* ì¹¸ íƒ€ì…ë³„ ìƒ‰ìƒ */
        .cell.start {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            border-color: #4ecca3;
        }

        .cell.finish {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            border-color: #f39c12;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .cell.bonus {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-color: #3498db;
        }

        .cell.trap {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-color: #e74c3c;
        }

        .cell.quiz {
            background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%);
            border-color: #9b59b6;
        }

        .cell.event {
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            border-color: #e056fd;
        }

        .player {
            width: 30px;
            height: 30px;
            background: #e74c3c;
            border-radius: 50%;
            position: absolute;
            bottom: 5px;
            right: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            z-index: 10;
            animation: playerBounce 0.5s;
        }

        @keyframes playerBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .dice-container {
            text-align: center;
        }

        .dice {
            width: 80px;
            height: 80px;
            background: white;
            border: 4px solid #667eea;
            border-radius: 15px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }

        .dice.rolling {
            animation: diceRoll 0.5s;
        }

        @keyframes diceRoll {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .message {
            text-align: center;
            padding: 20px;
            background: #e3f2fd;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            color: #1976d2;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            border: 2px solid #90caf9;
        }

        /* ëª¨ë‹¬ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: modalSlideIn 0.3s;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content h2 {
            margin-bottom: 20px;
            color: #667eea;
            font-size: 2em;
        }

        .modal-content p {
            margin-bottom: 20px;
            font-size: 1.2em;
            line-height: 1.6;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }

        .quiz-option {
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
        }

        .quiz-option:hover {
            background: #e9ecef;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 12px 30px;
            font-size: 1em;
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 12px 30px;
            font-size: 1em;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .board {
                gap: 5px;
                padding: 10px;
            }

            .cell {
                padding: 5px;
            }

            .cell-icon {
                font-size: 1.5em;
            }

            .cell-name {
                font-size: 0.65em;
            }

            .cell-number {
                width: 18px;
                height: 18px;
                font-size: 0.7em;
            }

            .player {
                width: 25px;
                height: 25px;
                font-size: 1em;
            }

            .dice {
                width: 60px;
                height: 60px;
                font-size: 2em;
            }

            .btn {
                padding: 12px 30px;
                font-size: 1em;
            }

            .game-info {
                font-size: 0.9em;
            }
        }

        .victory {
            animation: victoryPulse 1s infinite;
        }

        @keyframes victoryPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            position: absolute;
            animation: confettiFall 3s linear;
        }

        @keyframes confettiFall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸ® ìŠ¤í¬ì¸  ì§ê´€ ë§ˆìŠ¤í„°</h1>
        <p class="subtitle">ê²½ê¸°ì¥ìœ¼ë¡œ ë– ë‚˜ëŠ” ë³´ë“œê²Œì„ ì—¬í–‰!</p>

        <div class="game-info">
            <div class="info-item">
                <span>ğŸ“ í˜„ì¬ ìœ„ì¹˜:</span>
                <span id="current-position">1</span>
            </div>
            <div class="info-item">
                <span>ğŸ² ì£¼ì‚¬ìœ„:</span>
                <span id="dice-result">-</span>
            </div>
            <div class="info-item">
                <span>ğŸƒ ì´ë™ íšŸìˆ˜:</span>
                <span id="move-count">0</span>
            </div>
        </div>

        <div class="message" id="message">
            ğŸ  ì§‘ì—ì„œ ì¶œë°œí•©ë‹ˆë‹¤! ì£¼ì‚¬ìœ„ë¥¼ êµ´ë ¤ì£¼ì„¸ìš”!
        </div>

        <div class="board" id="board">
            <!-- ë³´ë“œíŒì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
        </div>

        <div class="controls">
            <div class="dice-container">
                <div class="dice" id="dice">ğŸ²</div>
            </div>
            <button class="btn btn-primary" id="roll-btn" onclick="rollDice()">
                ğŸ² ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°
            </button>
            <button class="btn btn-secondary" style="display:none;" id="restart-btn" onclick="restartGame()">
                ğŸ”„ ë‹¤ì‹œ ì‹œì‘í•˜ê¸°
            </button>
        </div>
    </div>

    <!-- í€´ì¦ˆ/ì´ë²¤íŠ¸ ëª¨ë‹¬ -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h2 id="modal-title">ì œëª©</h2>
            <p id="modal-text">ë‚´ìš©</p>
            <div id="modal-buttons" class="btn-group">
                <!-- ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <script>
        // ê²Œì„ ë°ì´í„°
        const cells = [
            { num: 1, icon: 'ğŸ ', name: 'ì¶œë°œ', type: 'start', effect: 'start' },
            { num: 2, icon: 'ğŸ“±', name: 'í‹°ì¼“ì˜ˆë§¤', type: 'bonus', effect: 'move', value: 2 },
            { num: 3, icon: 'ğŸ’³', name: 'êµí†µì¹´ë“œì¶©ì „ê¹œë¹¡', type: 'trap', effect: 'skip', value: 1 },
            { num: 4, icon: 'ğŸ¯', name: 'íŒ€í€´ì¦ˆ', type: 'quiz', effect: 'quiz', category: 'team' },
            { num: 5, icon: 'ğŸš‡', name: 'ì§€í•˜ì² íƒ‘ìŠ¹', type: 'normal', effect: 'none' },
            { num: 6, icon: 'ğŸŸï¸', name: 'ê²½ê¸°ì¥ë„ì°©', type: 'bonus', effect: 'move', value: 1 },
            { num: 7, icon: 'ğŸµ', name: 'ì‘ì›ê°€ì•”ê¸°', type: 'bonus', effect: 'double', value: 1 },
            { num: 8, icon: 'ğŸš»', name: 'í™”ì¥ì‹¤ëŒ€ê¸°ì¤„', type: 'trap', effect: 'skip', value: 1 },
            { num: 9, icon: 'ğŸ“¸', name: 'í¬í† ì¡´', type: 'normal', effect: 'none' },
            { num: 10, icon: 'ğŸ•', name: 'ê°„ì‹êµ¬ë§¤', type: 'normal', effect: 'none' },
            { num: 11, icon: 'ğŸ’º', name: 'ì¢‹ì€ìë¦¬ì„ ì ', type: 'bonus', effect: 'move', value: 3 },
            { num: 12, icon: 'âš½', name: 'ì¢…ëª©í€´ì¦ˆ', type: 'quiz', effect: 'quiz', category: 'sport' },
            { num: 13, icon: 'ğŸ‰', name: 'ê²½ê¸°ì‹œì‘', type: 'event', effect: 'move', value: 1 },
            { num: 14, icon: 'ğŸ˜±', name: 'ê°„ì‹ìŸìŒ', type: 'trap', effect: 'move', value: -2 },
            { num: 15, icon: 'ğŸ¤', name: 'ì‘ì›ë§¤ë„ˆí€´ì¦ˆ', type: 'quiz', effect: 'quiz', category: 'manner' },
            { num: 16, icon: 'ğŸ“¢', name: 'ì‘ì›ê°€í•©ì°½', type: 'bonus', effect: 'move', value: 1 },
            { num: 17, icon: 'âš¡', name: 'ìš°ë¦¬íŒ€ë“ì !', type: 'bonus', effect: 'move', value: 5 },
            { num: 18, icon: 'ğŸ“±', name: 'ë°°í„°ë¦¬ë¶€ì¡±', type: 'trap', effect: 'skip', value: 1 },
            { num: 19, icon: 'ğŸ', name: 'ê²½ê¸°ì¥ì´ë²¤íŠ¸', type: 'event', effect: 'random' },
            { num: 20, icon: 'ğŸµ', name: 'í•˜í”„íƒ€ì„ì‡¼', type: 'normal', effect: 'none' },
            { num: 21, icon: 'ğŸ—', name: 'ì¹˜í‚¨ë¨¹ë°©', type: 'bonus', effect: 'move', value: 1 },
            { num: 22, icon: 'ğŸ˜¢', name: 'ìš°ë¦¬íŒ€ì‹¤ì ', type: 'trap', effect: 'move', value: -1 },
            { num: 23, icon: 'ğŸ†', name: 'ê·¹ì ì¸ì—­ì „ìŠ¹', type: 'bonus', effect: 'move', value: 4 },
            { num: 24, icon: 'ğŸ‘', name: 'ì„ ìˆ˜ì‚¬ì¸íšŒ', type: 'event', effect: 'move', value: 2 },
            { num: 25, icon: 'ğŸŠ', name: 'ê³¨ì¸!', type: 'finish', effect: 'finish' }
        ];

        // í€´ì¦ˆ ë°ì´í„°
        const quizzes = {
            team: [
                { q: 'FCì„œìš¸ì˜ ë§ˆìŠ¤ì½”íŠ¸ ì´ë¦„ì€?', options: ['ì„œìš¸ì´', 'ê°•ì›ì´', 'ë¶€ì²œì´', 'ì¸ì²œì´'], answer: 0 },
                { q: 'ë‘ì‚°ë² ì–´ìŠ¤ì˜ ìƒì§• ë™ë¬¼ì€?', options: ['í˜¸ë‘ì´', 'ê³°', 'ì‚¬ì', 'ë…ìˆ˜ë¦¬'], answer: 1 },
                { q: 'Kë¦¬ê·¸ëŠ” ëª‡ ê°œ ë¦¬ê·¸ë¡œ ë‚˜ë‰˜ì–´ì ¸ ìˆë‚˜?', options: ['1ê°œ', '2ê°œ', '3ê°œ', '4ê°œ'], answer: 1 },
                { q: 'KBOëŠ” ëª‡ ê°œ íŒ€ì´ ì°¸ê°€í•˜ë‚˜?', options: ['8ê°œ', '9ê°œ', '10ê°œ', '12ê°œ'], answer: 2 }
            ],
            sport: [
                { q: 'ì¶•êµ¬ ê²½ê¸°ëŠ” ì „í›„ë°˜ ëª‡ ë¶„ì”©ì¸ê°€?', options: ['40ë¶„', '45ë¶„', '50ë¶„', '60ë¶„'], answer: 1 },
                { q: 'ì•¼êµ¬ì—ì„œ ìŠ¤íŠ¸ë¼ì´í¬ ëª‡ ê°œë©´ ì•„ì›ƒì¸ê°€?', options: ['2ê°œ', '3ê°œ', '4ê°œ', '5ê°œ'], answer: 1 },
                { q: 'ì¶•êµ¬ì—ì„œ ì†ìœ¼ë¡œ ê³µì„ ì¡ì„ ìˆ˜ ìˆëŠ” ì„ ìˆ˜ëŠ”?', options: ['ê³µê²©ìˆ˜', 'ë¯¸ë“œí•„ë”', 'ìˆ˜ë¹„ìˆ˜', 'ê³¨í‚¤í¼'], answer: 3 },
                { q: 'ì•¼êµ¬ëŠ” ëª‡ ì´ë‹ê¹Œì§€ ì§„í–‰í•˜ë‚˜?', options: ['7ì´ë‹', '8ì´ë‹', '9ì´ë‹', '10ì´ë‹'], answer: 2 }
            ],
            manner: [
                { q: 'ìƒëŒ€íŒ€ì—ê²Œ í•´ì•¼ í•  ì˜¬ë°”ë¥¸ í–‰ë™ì€?', options: ['ì•¼ìœ í•˜ê¸°', 'ì¢‹ì€ í”Œë ˆì´ì— ë°•ìˆ˜', 'ìš•í•˜ê¸°', 'ë¬´ì‹œí•˜ê¸°'], answer: 1 },
                { q: 'ê²½ê¸° ì¤‘ í•˜ë©´ ì•ˆ ë˜ëŠ” í–‰ë™ì€?', options: ['ì‘ì›í•˜ê¸°', 'ë°•ìˆ˜ì¹˜ê¸°', 'ìƒëŒ€íŒ€ ë¹„í•˜', 'í•¨ì„±ì§€ë¥´ê¸°'], answer: 2 },
                { q: 'ì“°ë ˆê¸°ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í•˜ë‚˜?', options: ['ë°”ë‹¥ì— ë²„ë¦¬ê¸°', 'ì§€ì •ëœ ê³³ì— ë²„ë¦¬ê¸°', 'ê·¸ëƒ¥ ë‘ê¸°', 'ì˜ì ë°‘ì— ìˆ¨ê¸°ê¸°'], answer: 1 },
                { q: 'ê²½ê¸°ì¥ì—ì„œ ì‚¬ì§„ ì°ì„ ë•Œ ì£¼ì˜í•  ì ì€?', options: ['í”Œë˜ì‹œ ì¼œê¸°', 'í”Œë˜ì‹œ ë„ê¸°', 'ì•„ë¬´ê±°ë‚˜', 'ì‚¬ì§„ ì•ˆ ì°ê¸°'], answer: 1 }
            ]
        };

        // ê²Œì„ ìƒíƒœ
        let playerPosition = 1;
        let moveCount = 0;
        let skipTurn = false;
        let canRollAgain = false;
        let gameFinished = false;

        // ì´ˆê¸°í™”
        function init() {
            createBoard();
            updatePlayerPosition();
        }

        // ë³´ë“œíŒ ìƒì„±
        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            
            cells.forEach((cell, index) => {
                const cellDiv = document.createElement('div');
                cellDiv.className = `cell ${cell.type}`;
                cellDiv.id = `cell-${cell.num}`;
                cellDiv.innerHTML = `
                    <div class="cell-number">${cell.num}</div>
                    <div class="cell-icon">${cell.icon}</div>
                    <div class="cell-name">${cell.name}</div>
                `;
                cellDiv.title = getCellDescription(cell);
                board.appendChild(cellDiv);
            });
        }

        // ì¹¸ ì„¤ëª…
        function getCellDescription(cell) {
            const descriptions = {
                'start': 'ê²Œì„ ì‹œì‘!',
                'finish': 'ì§ê´€ ë§ˆìŠ¤í„° ë‹¬ì„±!',
                'bonus': `${cell.name} - ë³´ë„ˆìŠ¤ ì¹¸`,
                'trap': `${cell.name} - í•¨ì • ì¹¸`,
                'quiz': `${cell.name} - í€´ì¦ˆ ì¹¸`,
                'event': `${cell.name} - ì´ë²¤íŠ¸ ì¹¸`,
                'normal': cell.name
            };
            return descriptions[cell.type] || cell.name;
        }

        // ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°
        function rollDice() {
            if (gameFinished) return;
            
            if (skipTurn) {
                showMessage('âŒ ì´ë²ˆ í„´ì€ ì‰¬ì–´ê°‘ë‹ˆë‹¤!');
                skipTurn = false;
                return;
            }

            const btn = document.getElementById('roll-btn');
            btn.disabled = true;
            
            const diceElement = document.getElementById('dice');
            diceElement.classList.add('rolling');
            
            // ëœë¤ ì£¼ì‚¬ìœ„ ì• ë‹ˆë©”ì´ì…˜
            let count = 0;
            const interval = setInterval(() => {
                const tempNum = Math.floor(Math.random() * 6) + 1;
                diceElement.textContent = tempNum;
                count++;
                
                if (count >= 10) {
                    clearInterval(interval);
                    const finalNum = Math.floor(Math.random() * 6) + 1;
                    diceElement.textContent = finalNum;
                    diceElement.classList.remove('rolling');
                    
                    document.getElementById('dice-result').textContent = finalNum;
                    
                    setTimeout(() => {
                        movePlayer(finalNum);
                    }, 500);
                }
            }, 100);
        }

        // í”Œë ˆì´ì–´ ì´ë™
        function movePlayer(steps) {
            const newPosition = Math.min(playerPosition + steps, 25);
            playerPosition = newPosition;
            moveCount++;
            
            updatePlayerPosition();
            document.getElementById('move-count').textContent = moveCount;
            
            const cell = cells[playerPosition - 1];
            handleCellEffect(cell);
        }

        // í”Œë ˆì´ì–´ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
        function updatePlayerPosition() {
            // ëª¨ë“  í”Œë ˆì´ì–´ ì œê±°
            document.querySelectorAll('.player').forEach(p => p.remove());
            
            // í˜„ì¬ ìœ„ì¹˜ì— í”Œë ˆì´ì–´ ì¶”ê°€
            const currentCell = document.getElementById(`cell-${playerPosition}`);
            const player = document.createElement('div');
            player.className = 'player';
            player.textContent = 'ğŸ˜Š';
            currentCell.appendChild(player);
            
            document.getElementById('current-position').textContent = playerPosition;
        }

        // ì¹¸ íš¨ê³¼ ì²˜ë¦¬
        function handleCellEffect(cell) {
            const btn = document.getElementById('roll-btn');
            
            switch (cell.effect) {
                case 'start':
                    showMessage('ğŸ  ì§‘ì—ì„œ ì¶œë°œ! ì¦ê±°ìš´ ì§ê´€ ì—¬í–‰ì„ ë– ë‚˜ë³¼ê¹Œìš”?');
                    btn.disabled = false;
                    break;
                    
                case 'finish':
                    gameFinished = true;
                    showVictory();
                    break;
                    
                case 'move':
                    if (cell.value > 0) {
                        showMessage(`ğŸ‰ ${cell.name}! ${cell.value}ì¹¸ ì „ì§„í•©ë‹ˆë‹¤!`);
                        setTimeout(() => {
                            playerPosition = Math.min(playerPosition + cell.value, 25);
                            updatePlayerPosition();
                            
                            const nextCell = cells[playerPosition - 1];
                            if (nextCell.effect === 'finish') {
                                handleCellEffect(nextCell);
                            } else {
                                btn.disabled = false;
                            }
                        }, 1500);
                    } else {
                        showMessage(`ğŸ˜± ${cell.name}! ${Math.abs(cell.value)}ì¹¸ í›„ì§„í•©ë‹ˆë‹¤...`);
                        setTimeout(() => {
                            playerPosition = Math.max(playerPosition + cell.value, 1);
                            updatePlayerPosition();
                            btn.disabled = false;
                        }, 1500);
                    }
                    break;
                    
                case 'skip':
                    showMessage(`â¸ï¸ ${cell.name}! ë‹¤ìŒ í„´ì„ ì‰¬ì–´ê°‘ë‹ˆë‹¤.`);
                    skipTurn = true;
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 2000);
                    break;
                    
                case 'double':
                    showMessage(`ğŸŠ ${cell.name}! ì£¼ì‚¬ìœ„ë¥¼ í•œ ë²ˆ ë” êµ´ë¦´ ìˆ˜ ìˆì–´ìš”!`);
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 2000);
                    break;
                    
                case 'quiz':
                    showQuiz(cell.category);
                    break;
                    
                case 'random':
                    showRandomEvent();
                    break;
                    
                default:
                    showMessage(`ğŸ“ ${cell.name}ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤!`);
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 1500);
            }
        }

        // í€´ì¦ˆ í‘œì‹œ
        function showQuiz(category) {
            const quizList = quizzes[category];
            const quiz = quizList[Math.floor(Math.random() * quizList.length)];
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = 'ğŸ¯ í€´ì¦ˆ íƒ€ì„!';
            text.textContent = quiz.q;
            
            buttons.innerHTML = '';
            quiz.options.forEach((option, index) => {
                const btn = document.createElement('div');
                btn.className = 'quiz-option';
                btn.textContent = option;
                btn.onclick = () => {
                    checkQuizAnswer(index, quiz.answer, category);
                };
                buttons.appendChild(btn);
            });
            
            modal.classList.add('show');
        }

        // í€´ì¦ˆ ì •ë‹µ í™•ì¸
        function checkQuizAnswer(selected, correct, category) {
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            const btn = document.getElementById('roll-btn');
            
            if (selected === correct) {
                const bonus = category === 'team' ? 3 : 2;
                showMessage(`ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤! ${bonus}ì¹¸ ì „ì§„!`);
                setTimeout(() => {
                    playerPosition = Math.min(playerPosition + bonus, 25);
                    updatePlayerPosition();
                    
                    const nextCell = cells[playerPosition - 1];
                    if (nextCell.effect === 'finish') {
                        handleCellEffect(nextCell);
                    } else {
                        btn.disabled = false;
                    }
                }, 1500);
            } else {
                const penalty = category === 'team' ? -1 : 0;
                if (penalty < 0) {
                    showMessage(`ğŸ˜¢ ì˜¤ë‹µì…ë‹ˆë‹¤! ${Math.abs(penalty)}ì¹¸ í›„ì§„...`);
                    setTimeout(() => {
                        playerPosition = Math.max(playerPosition + penalty, 1);
                        updatePlayerPosition();
                        btn.disabled = false;
                    }, 1500);
                } else {
                    showMessage(`ğŸ˜¢ ì˜¤ë‹µì…ë‹ˆë‹¤! ì œìë¦¬ì— ìˆìŠµë‹ˆë‹¤.`);
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 1500);
                }
            }
        }

        // ëœë¤ ì´ë²¤íŠ¸
        function showRandomEvent() {
            const events = [
                { name: 'í–‰ìš´ì˜ ë£°ë ›', value: Math.floor(Math.random() * 5) + 1 },
                { name: 'ê¸°ë…í’ˆ íšë“', value: 3 },
                { name: 'ì „ê´‘íŒ ë“±ì¥', value: 2 },
                { name: 'ê½', value: 0 }
            ];
            
            const event = events[Math.floor(Math.random() * events.length)];
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = 'ğŸ ê²½ê¸°ì¥ ì´ë²¤íŠ¸!';
            text.textContent = `${event.name}!\n${event.value > 0 ? `${event.value}ì¹¸ ì „ì§„í•©ë‹ˆë‹¤!` : 'ì•„ì‰½ì§€ë§Œ ì œìë¦¬ì…ë‹ˆë‹¤.'}`;
            
            buttons.innerHTML = '<button class="btn btn-success" onclick="closeEventModal(' + event.value + ')">í™•ì¸</button>';
            
            modal.classList.add('show');
        }

        // ì´ë²¤íŠ¸ ëª¨ë‹¬ ë‹«ê¸°
        function closeEventModal(value) {
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            const btn = document.getElementById('roll-btn');
            
            if (value > 0) {
                setTimeout(() => {
                    playerPosition = Math.min(playerPosition + value, 25);
                    updatePlayerPosition();
                    
                    const nextCell = cells[playerPosition - 1];
                    if (nextCell.effect === 'finish') {
                        handleCellEffect(nextCell);
                    } else {
                        btn.disabled = false;
                    }
                }, 500);
            } else {
                setTimeout(() => {
                    btn.disabled = false;
                }, 500);
            }
        }

        // ë©”ì‹œì§€ í‘œì‹œ
        function showMessage(msg) {
            document.getElementById('message').textContent = msg;
        }

        // ìŠ¹ë¦¬ í‘œì‹œ
        function showVictory() {
            showMessage('ğŸŠğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ì§ê´€ ë§ˆìŠ¤í„° ë‹¬ì„±! ğŸ‰ğŸŠ');
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = 'ğŸ† ê²Œì„ í´ë¦¬ì–´!';
            text.innerHTML = `
                <div class="victory">
                    <p style="font-size: 3em; margin: 20px 0;">ğŸŠ</p>
                    <p><strong>ì§ê´€ ë§ˆìŠ¤í„°</strong>ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤!</p>
                    <p>ì´ë™ íšŸìˆ˜: <strong>${moveCount}íšŒ</strong></p>
                    <p>ì´ì œ ì§„ì§œ ê²½ê¸°ì¥ìœ¼ë¡œ ë– ë‚˜ë³¼ê¹Œìš”?</p>
                </div>
            `;
            
            buttons.innerHTML = '<button class="btn btn-primary" onclick="restartGame()">ğŸ”„ ë‹¤ì‹œ ë„ì „í•˜ê¸°</button>';
            
            modal.classList.add('show');
            
            // í­ì£½ íš¨ê³¼
            createConfetti();
            
            document.getElementById('restart-btn').style.display = 'inline-block';
        }

        // í­ì£½ íš¨ê³¼
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.style.position = 'fixed';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-10px';
                    confetti.style.width = '10px';
                    confetti.style.height = '10px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animation = 'confettiFall 3s linear';
                    confetti.style.zIndex = '9999';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 50);
            }
        }

        // ê²Œì„ ì¬ì‹œì‘
        function restartGame() {
            playerPosition = 1;
            moveCount = 0;
            skipTurn = false;
            canRollAgain = false;
            gameFinished = false;
            
            document.getElementById('dice-result').textContent = '-';
            document.getElementById('move-count').textContent = '0';
            document.getElementById('roll-btn').disabled = false;
            document.getElementById('restart-btn').style.display = 'none';
            
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            updatePlayerPosition();
            showMessage('ğŸ  ì§‘ì—ì„œ ì¶œë°œí•©ë‹ˆë‹¤! ì£¼ì‚¬ìœ„ë¥¼ êµ´ë ¤ì£¼ì„¸ìš”!');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        window.onload = init;
    </script>
</body>
</html>