<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÆ Ïä§Ìè¨Ï∏† ÏßÅÍ¥Ä ÎßàÏä§ÌÑ∞ - Î≥¥ÎìúÍ≤åÏûÑ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #333;
        }

        .game-container {
            max-width: 900px;
            width: 100%;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #f8f9fa;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1em;
            font-weight: bold;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 25px;
            background: #e9ecef;
            padding: 15px;
            border-radius: 15px;
        }

        .cell {
            aspect-ratio: 1;
            background: white;
            border: 3px solid #dee2e6;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 8px;
            cursor: help;
            transition: all 0.3s;
            position: relative;
            font-size: 0.85em;
        }

        .cell:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .cell-number {
            position: absolute;
            top: 5px;
            left: 5px;
            background: #495057;
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75em;
            font-weight: bold;
        }

        .cell-icon {
            font-size: 2em;
            margin-bottom: 3px;
        }

        .cell-name {
            font-size: 0.75em;
            text-align: center;
            font-weight: bold;
            color: #495057;
            line-height: 1.2;
        }

        /* Ïπ∏ ÌÉÄÏûÖÎ≥Ñ ÏÉâÏÉÅ */
        .cell.start {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
            border-color: #4ecca3;
        }

        .cell.finish {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            border-color: #f39c12;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .cell.bonus {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border-color: #3498db;
        }

        .cell.trap {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-color: #e74c3c;
        }

        .cell.quiz {
            background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%);
            border-color: #9b59b6;
        }

        .cell.event {
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
            border-color: #e056fd;
        }

        .player {
            width: 30px;
            height: 30px;
            background: #e74c3c;
            border-radius: 50%;
            position: absolute;
            bottom: 5px;
            right: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            z-index: 10;
            animation: playerBounce 0.5s;
        }

        @keyframes playerBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .dice-container {
            text-align: center;
        }

        .dice {
            width: 80px;
            height: 80px;
            background: white;
            border: 4px solid #667eea;
            border-radius: 15px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }

        .dice.rolling {
            animation: diceRoll 0.5s;
        }

        @keyframes diceRoll {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(90deg); }
            50% { transform: rotate(180deg); }
            75% { transform: rotate(270deg); }
        }

        .btn {
            padding: 15px 40px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.3);
        }

        .btn-primary:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .message {
            text-align: center;
            padding: 20px;
            background: #e3f2fd;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            color: #1976d2;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            border: 2px solid #90caf9;
        }

        /* Î™®Îã¨ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: modalSlideIn 0.3s;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content h2 {
            margin-bottom: 20px;
            color: #667eea;
            font-size: 2em;
        }

        .modal-content p {
            margin-bottom: 20px;
            font-size: 1.2em;
            line-height: 1.6;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
        }

        .quiz-option {
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1em;
        }

        .quiz-option:hover {
            background: #e9ecef;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 12px 30px;
            font-size: 1em;
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            padding: 12px 30px;
            font-size: 1em;
        }

        /* Î∞òÏùëÌòï */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .board {
                gap: 5px;
                padding: 10px;
            }

            .cell {
                padding: 5px;
            }

            .cell-icon {
                font-size: 1.5em;
            }

            .cell-name {
                font-size: 0.65em;
            }

            .cell-number {
                width: 18px;
                height: 18px;
                font-size: 0.7em;
            }

            .player {
                width: 25px;
                height: 25px;
                font-size: 1em;
            }

            .dice {
                width: 60px;
                height: 60px;
                font-size: 2em;
            }

            .btn {
                padding: 12px 30px;
                font-size: 1em;
            }

            .game-info {
                font-size: 0.9em;
            }
        }

        .victory {
            animation: victoryPulse 1s infinite;
        }

        @keyframes victoryPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            position: absolute;
            animation: confettiFall 3s linear;
        }

        @keyframes confettiFall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üéÆ Ïä§Ìè¨Ï∏† ÏßÅÍ¥Ä ÎßàÏä§ÌÑ∞</h1>
        <p class="subtitle">Í≤ΩÍ∏∞Ïû•ÏúºÎ°ú Îñ†ÎÇòÎäî Î≥¥ÎìúÍ≤åÏûÑ Ïó¨Ìñâ!</p>

        <div class="game-info">
            <div class="info-item">
                <span>üìç ÌòÑÏû¨ ÏúÑÏπò:</span>
                <span id="current-position">1</span>
            </div>
            <div class="info-item">
                <span>üé≤ Ï£ºÏÇ¨ÏúÑ:</span>
                <span id="dice-result">-</span>
            </div>
            <div class="info-item">
                <span>üèÉ Ïù¥Îèô ÌöüÏàò:</span>
                <span id="move-count">0</span>
            </div>
        </div>

        <div class="message" id="message">
            üè† ÏßëÏóêÏÑú Ï∂úÎ∞úÌï©ÎãàÎã§! Ï£ºÏÇ¨ÏúÑÎ•º Íµ¥Î†§Ï£ºÏÑ∏Ïöî!
        </div>

        <div class="board" id="board">
            <!-- Î≥¥ÎìúÌåêÏù¥ Ïó¨Í∏∞Ïóê ÏÉùÏÑ±Îê©ÎãàÎã§ -->
        </div>

        <div class="controls">
            <div class="dice-container">
                <div class="dice" id="dice">üé≤</div>
            </div>
            <button class="btn btn-primary" id="roll-btn" onclick="rollDice()">
                üé≤ Ï£ºÏÇ¨ÏúÑ Íµ¥Î¶¨Í∏∞
            </button>
            <button class="btn btn-secondary" style="display:none;" id="restart-btn" onclick="restartGame()">
                üîÑ Îã§Ïãú ÏãúÏûëÌïòÍ∏∞
            </button>
        </div>
    </div>

    <!-- ÌÄ¥Ï¶à/Ïù¥Î≤§Ìä∏ Î™®Îã¨ -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h2 id="modal-title">Ï†úÎ™©</h2>
            <p id="modal-text">ÎÇ¥Ïö©</p>
            <div id="modal-buttons" class="btn-group">
                <!-- Î≤ÑÌäºÎì§Ïù¥ Ïó¨Í∏∞Ïóê ÏÉùÏÑ±Îê©ÎãàÎã§ -->
            </div>
        </div>
    </div>

    <script>
        // Í≤åÏûÑ Îç∞Ïù¥ÌÑ∞
        const cells = [
            { num: 1, icon: 'üè†', name: 'Ï∂úÎ∞ú', type: 'start', effect: 'start' },
            { num: 2, icon: 'üì±', name: 'Ìã∞ÏºìÏòàÎß§', type: 'bonus', effect: 'move', value: 2 },
            { num: 3, icon: 'üí≥', name: 'ÍµêÌÜµÏπ¥ÎìúÏ∂©Ï†ÑÍπúÎπ°', type: 'trap', effect: 'skip', value: 1 },
            { num: 4, icon: 'üéØ', name: 'ÌåÄÌÄ¥Ï¶à', type: 'quiz', effect: 'quiz', category: 'team' },
            { num: 5, icon: 'üöá', name: 'ÏßÄÌïòÏ≤†ÌÉëÏäπ', type: 'normal', effect: 'none' },
            { num: 6, icon: 'üèüÔ∏è', name: 'Í≤ΩÍ∏∞Ïû•ÎèÑÏ∞©', type: 'bonus', effect: 'move', value: 1 },
            { num: 7, icon: 'üéµ', name: 'ÏùëÏõêÍ∞ÄÏïîÍ∏∞', type: 'bonus', effect: 'double', value: 1 },
            { num: 8, icon: 'üöª', name: 'ÌôîÏû•Ïã§ÎåÄÍ∏∞Ï§Ñ', type: 'trap', effect: 'skip', value: 1 },
            { num: 9, icon: 'üì∏', name: 'Ìè¨ÌÜ†Ï°¥', type: 'normal', effect: 'none' },
            { num: 10, icon: 'üçï', name: 'Í∞ÑÏãùÍµ¨Îß§', type: 'normal', effect: 'none' },
            { num: 11, icon: 'üí∫', name: 'Ï¢ãÏùÄÏûêÎ¶¨ÏÑ†Ï†ê', type: 'bonus', effect: 'move', value: 3 },
            { num: 12, icon: '‚öΩ', name: 'Ï¢ÖÎ™©ÌÄ¥Ï¶à', type: 'quiz', effect: 'quiz', category: 'sport' },
            { num: 13, icon: 'üéâ', name: 'Í≤ΩÍ∏∞ÏãúÏûë', type: 'event', effect: 'move', value: 1 },
            { num: 14, icon: 'üò±', name: 'Í∞ÑÏãùÏèüÏùå', type: 'trap', effect: 'move', value: -2 },
            { num: 15, icon: 'üé§', name: 'ÏùëÏõêÎß§ÎÑàÌÄ¥Ï¶à', type: 'quiz', effect: 'quiz', category: 'manner' },
            { num: 16, icon: 'üì¢', name: 'ÏùëÏõêÍ∞ÄÌï©Ï∞Ω', type: 'bonus', effect: 'move', value: 1 },
            { num: 17, icon: '‚ö°', name: 'Ïö∞Î¶¨ÌåÄÎìùÏ†ê!', type: 'bonus', effect: 'move', value: 5 },
            { num: 18, icon: 'üì±', name: 'Î∞∞ÌÑ∞Î¶¨Î∂ÄÏ°±', type: 'trap', effect: 'skip', value: 1 },
            { num: 19, icon: 'üéÅ', name: 'Í≤ΩÍ∏∞Ïû•Ïù¥Î≤§Ìä∏', type: 'event', effect: 'random' },
            { num: 20, icon: 'üéµ', name: 'ÌïòÌîÑÌÉÄÏûÑÏáº', type: 'normal', effect: 'none' },
            { num: 21, icon: 'üçó', name: 'ÏπòÌÇ®Î®πÎ∞©', type: 'bonus', effect: 'move', value: 1 },
            { num: 22, icon: 'üò¢', name: 'Ïö∞Î¶¨ÌåÄÏã§Ï†ê', type: 'trap', effect: 'move', value: -1 },
            { num: 23, icon: 'üèÜ', name: 'Í∑πÏ†ÅÏù∏Ïó≠Ï†ÑÏäπ', type: 'bonus', effect: 'move', value: 4 },
            { num: 24, icon: 'üëè', name: 'ÏÑ†ÏàòÏÇ¨Ïù∏Ìöå', type: 'event', effect: 'move', value: 2 },
            { num: 25, icon: 'üéä', name: 'Í≥®Ïù∏!', type: 'finish', effect: 'finish' }
        ];

        // ÌÄ¥Ï¶à Îç∞Ïù¥ÌÑ∞
        const quizzes = {
            team: [
                { q: 'FCÏÑúÏö∏Ïùò ÎßàÏä§ÏΩîÌä∏ Ïù¥Î¶ÑÏùÄ?', options: ['ÏÑúÏö∏Ïù¥', 'Í∞ïÏõêÏù¥', 'Î∂ÄÏ≤úÏù¥', 'Ïù∏Ï≤úÏù¥'], answer: 0 },
                { q: 'ÎëêÏÇ∞Î≤†Ïñ¥Ïä§Ïùò ÏÉÅÏßï ÎèôÎ¨ºÏùÄ?', options: ['Ìò∏ÎûëÏù¥', 'Í≥∞', 'ÏÇ¨Ïûê', 'ÎèÖÏàòÎ¶¨'], answer: 1 },
                { q: 'KÎ¶¨Í∑∏Îäî Î™á Í∞ú Î¶¨Í∑∏Î°ú ÎÇòÎâòÏñ¥Ï†∏ ÏûàÎÇò?', options: ['1Í∞ú', '2Í∞ú', '3Í∞ú', '4Í∞ú'], answer: 1 },
                { q: 'KBOÎäî Î™á Í∞ú ÌåÄÏù¥ Ï∞∏Í∞ÄÌïòÎÇò?', options: ['8Í∞ú', '9Í∞ú', '10Í∞ú', '12Í∞ú'], answer: 2 }
            ],
            sport: [
                { q: 'Ï∂ïÍµ¨ Í≤ΩÍ∏∞Îäî Ï†ÑÌõÑÎ∞ò Î™á Î∂ÑÏî©Ïù∏Í∞Ä?', options: ['40Î∂Ñ', '45Î∂Ñ', '50Î∂Ñ', '60Î∂Ñ'], answer: 1 },
                { q: 'ÏïºÍµ¨ÏóêÏÑú Ïä§Ìä∏ÎùºÏù¥ÌÅ¨ Î™á Í∞úÎ©¥ ÏïÑÏõÉÏù∏Í∞Ä?', options: ['2Í∞ú', '3Í∞ú', '4Í∞ú', '5Í∞ú'], answer: 1 },
                { q: 'Ï∂ïÍµ¨ÏóêÏÑú ÏÜêÏúºÎ°ú Í≥µÏùÑ Ïû°ÏùÑ Ïàò ÏûàÎäî ÏÑ†ÏàòÎäî?', options: ['Í≥µÍ≤©Ïàò', 'ÎØ∏ÎìúÌïÑÎçî', 'ÏàòÎπÑÏàò', 'Í≥®ÌÇ§Ìçº'], answer: 3 },
                { q: 'ÏïºÍµ¨Îäî Î™á Ïù¥ÎãùÍπåÏßÄ ÏßÑÌñâÌïòÎÇò?', options: ['7Ïù¥Îãù', '8Ïù¥Îãù', '9Ïù¥Îãù', '10Ïù¥Îãù'], answer: 2 }
            ],
            manner: [
                { q: 'ÏÉÅÎåÄÌåÄÏóêÍ≤å Ìï¥Ïïº Ìï† Ïò¨Î∞îÎ•∏ ÌñâÎèôÏùÄ?', options: ['ÏïºÏú†ÌïòÍ∏∞', 'Ï¢ãÏùÄ ÌîåÎ†àÏù¥Ïóê Î∞ïÏàò', 'ÏöïÌïòÍ∏∞', 'Î¨¥ÏãúÌïòÍ∏∞'], answer: 1 },
                { q: 'Í≤ΩÍ∏∞ Ï§ë ÌïòÎ©¥ Ïïà ÎêòÎäî ÌñâÎèôÏùÄ?', options: ['ÏùëÏõêÌïòÍ∏∞', 'Î∞ïÏàòÏπòÍ∏∞', 'ÏÉÅÎåÄÌåÄ ÎπÑÌïò', 'Ìï®ÏÑ±ÏßÄÎ•¥Í∏∞'], answer: 2 },
                { q: 'Ïì∞Î†àÍ∏∞Îäî Ïñ¥ÎñªÍ≤å Ìï¥Ïïº ÌïòÎÇò?', options: ['Î∞îÎã•Ïóê Î≤ÑÎ¶¨Í∏∞', 'ÏßÄÏ†ïÎêú Í≥≥Ïóê Î≤ÑÎ¶¨Í∏∞', 'Í∑∏ÎÉ• ÎëêÍ∏∞', 'ÏùòÏûê Î∞ëÏóê Ïà®Í∏∞Í∏∞'], answer: 1 },
                { q: 'Í≤ΩÍ∏∞Ïû•ÏóêÏÑú ÏÇ¨ÏßÑ Ï∞çÏùÑ Îïå Ï£ºÏùòÌï† Ï†êÏùÄ?', options: ['ÌîåÎûòÏãú ÏºúÍ∏∞', 'ÌîåÎûòÏãú ÎÅÑÍ∏∞', 'ÏïÑÎ¨¥Í±∞ÎÇò', 'ÏÇ¨ÏßÑ Ïïà Ï∞çÍ∏∞'], answer: 1 }
            ]
        };

        // Í≤åÏûÑ ÏÉÅÌÉú
        let playerPosition = 1;
        let moveCount = 0;
        let skipTurn = false;
        let canRollAgain = false;
        let gameFinished = false;

        // Ï¥àÍ∏∞Ìôî
        function init() {
            createBoard();
            updatePlayerPosition();
        }

        // Î≥¥ÎìúÌåê ÏÉùÏÑ±
        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            
            cells.forEach((cell, index) => {
                const cellDiv = document.createElement('div');
                cellDiv.className = `cell ${cell.type}`;
                cellDiv.id = `cell-${cell.num}`;
                cellDiv.innerHTML = `
                    <div class="cell-number">${cell.num}</div>
                    <div class="cell-icon">${cell.icon}</div>
                    <div class="cell-name">${cell.name}</div>
                `;
                cellDiv.title = getCellDescription(cell);
                board.appendChild(cellDiv);
            });
        }

        // Ïπ∏ ÏÑ§Î™Ö
        function getCellDescription(cell) {
            const descriptions = {
                'start': 'Í≤åÏûÑ ÏãúÏûë!',
                'finish': 'ÏßÅÍ¥Ä ÎßàÏä§ÌÑ∞ Îã¨ÏÑ±!',
                'bonus': `${cell.name} - Î≥¥ÎÑàÏä§ Ïπ∏`,
                'trap': `${cell.name} - Ìï®Ï†ï Ïπ∏`,
                'quiz': `${cell.name} - ÌÄ¥Ï¶à Ïπ∏`,
                'event': `${cell.name} - Ïù¥Î≤§Ìä∏ Ïπ∏`,
                'normal': cell.name
            };
            return descriptions[cell.type] || cell.name;
        }

        // Ï£ºÏÇ¨ÏúÑ Íµ¥Î¶¨Í∏∞
        function rollDice() {
            if (gameFinished) return;
            
            if (skipTurn) {
                showMessage('‚ùå Ïù¥Î≤à ÌÑ¥ÏùÄ Ïâ¨Ïñ¥Í∞ëÎãàÎã§!');
                skipTurn = false;
                return;
            }

            const btn = document.getElementById('roll-btn');
            btn.disabled = true;
            
            const diceElement = document.getElementById('dice');
            diceElement.classList.add('rolling');
            
            // ÎûúÎç§ Ï£ºÏÇ¨ÏúÑ Ïï†ÎãàÎ©îÏù¥ÏÖò
            let count = 0;
            const interval = setInterval(() => {
                const tempNum = Math.floor(Math.random() * 6) + 1;
                diceElement.textContent = tempNum;
                count++;
                
                if (count >= 10) {
                    clearInterval(interval);
                    const finalNum = Math.floor(Math.random() * 6) + 1;
                    diceElement.textContent = finalNum;
                    diceElement.classList.remove('rolling');
                    
                    document.getElementById('dice-result').textContent = finalNum;
                    
                    setTimeout(() => {
                        movePlayer(finalNum);
                    }, 500);
                }
            }, 100);
        }

        // ÌîåÎ†àÏù¥Ïñ¥ Ïù¥Îèô
        function movePlayer(steps) {
            const newPosition = Math.min(playerPosition + steps, 25);
            playerPosition = newPosition;
            moveCount++;
            
            updatePlayerPosition();
            document.getElementById('move-count').textContent = moveCount;
            
            const cell = cells[playerPosition - 1];
            handleCellEffect(cell);
        }

        // ÌîåÎ†àÏù¥Ïñ¥ ÏúÑÏπò ÏóÖÎç∞Ïù¥Ìä∏
        function updatePlayerPosition() {
            // Î™®Îì† ÌîåÎ†àÏù¥Ïñ¥ Ï†úÍ±∞
            document.querySelectorAll('.player').forEach(p => p.remove());
            
            // ÌòÑÏû¨ ÏúÑÏπòÏóê ÌîåÎ†àÏù¥Ïñ¥ Ï∂îÍ∞Ä
            const currentCell = document.getElementById(`cell-${playerPosition}`);
            const player = document.createElement('div');
            player.className = 'player';
            player.textContent = 'üòä';
            currentCell.appendChild(player);
            
            document.getElementById('current-position').textContent = playerPosition;
        }

        // Ïπ∏ Ìö®Í≥º Ï≤òÎ¶¨
        function handleCellEffect(cell) {
            const btn = document.getElementById('roll-btn');
            
            switch (cell.effect) {
                case 'start':
                    showMessage('üè† ÏßëÏóêÏÑú Ï∂úÎ∞ú! Ï¶êÍ±∞Ïö¥ ÏßÅÍ¥Ä Ïó¨ÌñâÏùÑ Îñ†ÎÇòÎ≥ºÍπåÏöî?');
                    btn.disabled = false;
                    break;
                    
                case 'finish':
                    gameFinished = true;
                    showVictory();
                    break;
                    
                case 'move':
                    if (cell.value > 0) {
                        showMessage(`üéâ ${cell.name}! ${cell.value}Ïπ∏ Ï†ÑÏßÑÌï©ÎãàÎã§!`);
                        setTimeout(() => {
                            playerPosition = Math.min(playerPosition + cell.value, 25);
                            updatePlayerPosition();
                            
                            const nextCell = cells[playerPosition - 1];
                            if (nextCell.effect === 'finish') {
                                handleCellEffect(nextCell);
                            } else {
                                btn.disabled = false;
                            }
                        }, 1500);
                    } else {
                        showMessage(`üò± ${cell.name}! ${Math.abs(cell.value)}Ïπ∏ ÌõÑÏßÑÌï©ÎãàÎã§...`);
                        setTimeout(() => {
                            playerPosition = Math.max(playerPosition + cell.value, 1);
                            updatePlayerPosition();
                            btn.disabled = false;
                        }, 1500);
                    }
                    break;
                    
                case 'skip':
                    showMessage(`‚è∏Ô∏è ${cell.name}! Îã§Ïùå ÌÑ¥ÏùÑ Ïâ¨Ïñ¥Í∞ëÎãàÎã§.`);
                    skipTurn = true;
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 2000);
                    break;
                    
                case 'double':
                    showMessage(`üéä ${cell.name}! Ï£ºÏÇ¨ÏúÑÎ•º Ìïú Î≤à Îçî Íµ¥Î¶¥ Ïàò ÏûàÏñ¥Ïöî!`);
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 2000);
                    break;
                    
                case 'quiz':
                    showQuiz(cell.category);
                    break;
                    
                case 'random':
                    showRandomEvent();
                    break;
                    
                default:
                    showMessage(`üìç ${cell.name}Ïóê ÎèÑÏ∞©ÌñàÏäµÎãàÎã§!`);
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 1500);
            }
        }

        // ÌÄ¥Ï¶à ÌëúÏãú
        function showQuiz(category) {
            const quizList = quizzes[category];
            const quiz = quizList[Math.floor(Math.random() * quizList.length)];
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = 'üéØ ÌÄ¥Ï¶à ÌÉÄÏûÑ!';
            text.textContent = quiz.q;
            
            buttons.innerHTML = '';
            quiz.options.forEach((option, index) => {
                const btn = document.createElement('div');
                btn.className = 'quiz-option';
                btn.textContent = option;
                btn.onclick = () => {
                    checkQuizAnswer(index, quiz.answer, category);
                };
                buttons.appendChild(btn);
            });
            
            modal.classList.add('show');
        }

        // ÌÄ¥Ï¶à Ï†ïÎãµ ÌôïÏù∏
        function checkQuizAnswer(selected, correct, category) {
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            const btn = document.getElementById('roll-btn');
            
            if (selected === correct) {
                const bonus = category === 'team' ? 3 : 2;
                showMessage(`üéâ Ï†ïÎãµÏûÖÎãàÎã§! ${bonus}Ïπ∏ Ï†ÑÏßÑ!`);
                setTimeout(() => {
                    playerPosition = Math.min(playerPosition + bonus, 25);
                    updatePlayerPosition();
                    
                    const nextCell = cells[playerPosition - 1];
                    if (nextCell.effect === 'finish') {
                        handleCellEffect(nextCell);
                    } else {
                        btn.disabled = false;
                    }
                }, 1500);
            } else {
                const penalty = category === 'team' ? -1 : 0;
                if (penalty < 0) {
                    showMessage(`üò¢ Ïò§ÎãµÏûÖÎãàÎã§! ${Math.abs(penalty)}Ïπ∏ ÌõÑÏßÑ...`);
                    setTimeout(() => {
                        playerPosition = Math.max(playerPosition + penalty, 1);
                        updatePlayerPosition();
                        btn.disabled = false;
                    }, 1500);
                } else {
                    showMessage(`üò¢ Ïò§ÎãµÏûÖÎãàÎã§! Ï†úÏûêÎ¶¨Ïóê ÏûàÏäµÎãàÎã§.`);
                    setTimeout(() => {
                        btn.disabled = false;
                    }, 1500);
                }
            }
        }

        // ÎûúÎç§ Ïù¥Î≤§Ìä∏
        function showRandomEvent() {
            const events = [
                { name: 'ÌñâÏö¥Ïùò Î£∞Î†õ', value: Math.floor(Math.random() * 5) + 1 },
                { name: 'Í∏∞ÎÖêÌíà ÌöçÎìù', value: 3 },
                { name: 'Ï†ÑÍ¥ëÌåê Îì±Ïû•', value: 2 },
                { name: 'ÍΩù', value: 0 }
            ];
            
            const event = events[Math.floor(Math.random() * events.length)];
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = 'üéÅ Í≤ΩÍ∏∞Ïû• Ïù¥Î≤§Ìä∏!';
            text.textContent = `${event.name}!\n${event.value > 0 ? `${event.value}Ïπ∏ Ï†ÑÏßÑÌï©ÎãàÎã§!` : 'ÏïÑÏâΩÏßÄÎßå Ï†úÏûêÎ¶¨ÏûÖÎãàÎã§.'}`;
            
            buttons.innerHTML = '<button class="btn btn-success" onclick="closeEventModal(' + event.value + ')">ÌôïÏù∏</button>';
            
            modal.classList.add('show');
        }

        // Ïù¥Î≤§Ìä∏ Î™®Îã¨ Îã´Í∏∞
        function closeEventModal(value) {
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            const btn = document.getElementById('roll-btn');
            
            if (value > 0) {
                setTimeout(() => {
                    playerPosition = Math.min(playerPosition + value, 25);
                    updatePlayerPosition();
                    
                    const nextCell = cells[playerPosition - 1];
                    if (nextCell.effect === 'finish') {
                        handleCellEffect(nextCell);
                    } else {
                        btn.disabled = false;
                    }
                }, 500);
            } else {
                setTimeout(() => {
                    btn.disabled = false;
                }, 500);
            }
        }

        // Î©îÏãúÏßÄ ÌëúÏãú
        function showMessage(msg) {
            document.getElementById('message').textContent = msg;
        }

        // ÏäπÎ¶¨ ÌëúÏãú
        function showVictory() {
            showMessage('üéäüéâ Ï∂ïÌïòÌï©ÎãàÎã§! ÏßÅÍ¥Ä ÎßàÏä§ÌÑ∞ Îã¨ÏÑ±! üéâüéä');
            
            const modal = document.getElementById('modal');
            const title = document.getElementById('modal-title');
            const text = document.getElementById('modal-text');
            const buttons = document.getElementById('modal-buttons');
            
            title.textContent = 'üèÜ Í≤åÏûÑ ÌÅ¥Î¶¨Ïñ¥!';
            text.innerHTML = `
                <div class="victory">
                    <p style="font-size: 3em; margin: 20px 0;">üéä</p>
                    <p><strong>ÏßÅÍ¥Ä ÎßàÏä§ÌÑ∞</strong>Í∞Ä ÎêòÏóàÏäµÎãàÎã§!</p>
                    <p>Ïù¥Îèô ÌöüÏàò: <strong>${moveCount}Ìöå</strong></p>
                    <p>Ïù¥Ï†ú ÏßÑÏßú Í≤ΩÍ∏∞Ïû•ÏúºÎ°ú Îñ†ÎÇòÎ≥ºÍπåÏöî?</p>
                </div>
            `;
            
            buttons.innerHTML = '<button class="btn btn-primary" onclick="restartGame()">üîÑ Îã§Ïãú ÎèÑÏ†ÑÌïòÍ∏∞</button>';
            
            modal.classList.add('show');
            
            // Ìè≠Ï£Ω Ìö®Í≥º
            createConfetti();
            
            document.getElementById('restart-btn').style.display = 'inline-block';
        }

        // Ìè≠Ï£Ω Ìö®Í≥º
        function createConfetti() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.style.position = 'fixed';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-10px';
                    confetti.style.width = '10px';
                    confetti.style.height = '10px';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animation = 'confettiFall 3s linear';
                    confetti.style.zIndex = '9999';
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 50);
            }
        }

        // Í≤åÏûÑ Ïû¨ÏãúÏûë
        function restartGame() {
            playerPosition = 1;
            moveCount = 0;
            skipTurn = false;
            canRollAgain = false;
            gameFinished = false;
            
            document.getElementById('dice-result').textContent = '-';
            document.getElementById('move-count').textContent = '0';
            document.getElementById('roll-btn').disabled = false;
            document.getElementById('restart-btn').style.display = 'none';
            
            const modal = document.getElementById('modal');
            modal.classList.remove('show');
            
            updatePlayerPosition();
            showMessage('üè† ÏßëÏóêÏÑú Ï∂úÎ∞úÌï©ÎãàÎã§! Ï£ºÏÇ¨ÏúÑÎ•º Íµ¥Î†§Ï£ºÏÑ∏Ïöî!');
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        window.onload = init;
    </script>
</body>
</html>